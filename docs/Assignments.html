<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>CRIM 250 Assignments</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Brianna Fisher</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="Assignments.html">CRIM 250 Assignments</a>
</li>
<li>
  <a href="Links.html">Links</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">CRIM 250 Assignments</h1>

</div>


<div id="assignment-1" class="section level1">
<h1>Assignment 1</h1>
<div id="problem-1" class="section level3">
<h3>Problem 1</h3>
<p>Install the datasets package on the console below using <code>install.packages("datasets")</code>. Now load the library.</p>
<pre class="r"><code>#Install the dataset package  
#install.packages(&quot;datasets&quot;)

#load in the library 
library(datasets)</code></pre>
<p>Load the USArrests dataset and rename it <code>dat</code>. Note that this dataset comes with R, in the package datasets, so there’s no need to load data from your computer. Why is it useful to rename the dataset?</p>
<pre class="r"><code>#Load in the dataset
USArrests</code></pre>
<pre><code>##                Murder Assault UrbanPop Rape
## Alabama          13.2     236       58 21.2
## Alaska           10.0     263       48 44.5
## Arizona           8.1     294       80 31.0
## Arkansas          8.8     190       50 19.5
## California        9.0     276       91 40.6
## Colorado          7.9     204       78 38.7
## Connecticut       3.3     110       77 11.1
## Delaware          5.9     238       72 15.8
## Florida          15.4     335       80 31.9
## Georgia          17.4     211       60 25.8
## Hawaii            5.3      46       83 20.2
## Idaho             2.6     120       54 14.2
## Illinois         10.4     249       83 24.0
## Indiana           7.2     113       65 21.0
## Iowa              2.2      56       57 11.3
## Kansas            6.0     115       66 18.0
## Kentucky          9.7     109       52 16.3
## Louisiana        15.4     249       66 22.2
## Maine             2.1      83       51  7.8
## Maryland         11.3     300       67 27.8
## Massachusetts     4.4     149       85 16.3
## Michigan         12.1     255       74 35.1
## Minnesota         2.7      72       66 14.9
## Mississippi      16.1     259       44 17.1
## Missouri          9.0     178       70 28.2
## Montana           6.0     109       53 16.4
## Nebraska          4.3     102       62 16.5
## Nevada           12.2     252       81 46.0
## New Hampshire     2.1      57       56  9.5
## New Jersey        7.4     159       89 18.8
## New Mexico       11.4     285       70 32.1
## New York         11.1     254       86 26.1
## North Carolina   13.0     337       45 16.1
## North Dakota      0.8      45       44  7.3
## Ohio              7.3     120       75 21.4
## Oklahoma          6.6     151       68 20.0
## Oregon            4.9     159       67 29.3
## Pennsylvania      6.3     106       72 14.9
## Rhode Island      3.4     174       87  8.3
## South Carolina   14.4     279       48 22.5
## South Dakota      3.8      86       45 12.8
## Tennessee        13.2     188       59 26.9
## Texas            12.7     201       80 25.5
## Utah              3.2     120       80 22.9
## Vermont           2.2      48       32 11.2
## Virginia          8.5     156       63 20.7
## Washington        4.0     145       73 26.2
## West Virginia     5.7      81       39  9.3
## Wisconsin         2.6      53       66 10.8
## Wyoming           6.8     161       60 15.6</code></pre>
<pre class="r"><code>#rename the USArrests dataset
dat &lt;- USArrests</code></pre>
<p><strong>It is useful to rename the dataset because it is easier to work with. If the data set had a longer or more complicated name, it would be difficult and time consuming to type out the dataset name every time when you want to perform a function on the data. It also lets you keep track of your work if you make different versions of it so that it is not contaminated by changes that were meant to be on one version and not the other. This will let you replicate the work if changes were made to different versions.</strong></p>
</div>
<div id="problem-2" class="section level3">
<h3>Problem 2</h3>
<p>Use this command to make the state names into a new variable called State.</p>
<pre class="r"><code>dat$state &lt;- tolower(rownames(USArrests))</code></pre>
<p>This dataset has the state names as row names, so we just want to make them into a new variable. We also make them all lower case, because that will help us draw a map later - the map function requires the states to be lower case.</p>
<p>List the variables contained in the dataset <code>USArrests</code>.</p>
<pre class="r"><code>#find the variables in the dataset
names(dat)</code></pre>
<pre><code>## [1] &quot;Murder&quot;   &quot;Assault&quot;  &quot;UrbanPop&quot; &quot;Rape&quot;     &quot;state&quot;</code></pre>
<p><strong>The variables in the USArrests dataset are Murder, Assault, UrbanPop, Rape, and State.</strong></p>
</div>
<div id="problem-3" class="section level3">
<h3>Problem 3</h3>
<p>What type of variable (from the DVB chapter) is <code>Murder</code>?</p>
<p><strong>Murder is a quantitative variable from the DVB chapter since it is a count of numbers.</strong></p>
<p>What R Type of variable is it?</p>
<p><strong>Murder is a numeric variable from the R type since it is also a count of numbers and functions such as mean or median can be applied.</strong></p>
</div>
<div id="problem-4" class="section level3">
<h3>Problem 4</h3>
<p>What information is contained in this dataset, in general? What do the numbers mean?</p>
<p><strong>The dataset contains arrest numbers for 4 types of crimes within all 50 states. Each state has a corresponding arrest rate for murder, assault, and rape, as well as the percent of urban population within the state. The numbers mean the number of arrests per 100,000 people in that state.</strong></p>
</div>
<div id="problem-5" class="section level3">
<h3>Problem 5</h3>
<p>Draw a histogram of <code>Murder</code> with proper labels and title.</p>
<pre class="r"><code>hist(dat$Murder, main = &quot;Histogram of Murder Arrests&quot;, xlab = &quot;Number of Murder Arrests&quot;, ylab = &quot;Frequency&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>
<div id="problem-6" class="section level3">
<h3>Problem 6</h3>
<p>Please summarize <code>Murder</code> quantitatively. What are its mean and median? What is the difference between mean and median? What is a quartile, and why do you think R gives you the 1st Qu. and 3rd Qu.?</p>
<pre class="r"><code>#finding the summary statistics of the murder variable
summary(dat$Murder)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   0.800   4.075   7.250   7.788  11.250  17.400</code></pre>
<p><strong>The mean of the murder variable is 7.788 murders, while the median is 7.250 murders. The mean is the sum of all data values divided by the number of values, or the average of the values within the dataset. The median, however, is the middle value after all of the values are put in numerical order. When distributions are skewed or there are outliers in the data, the median is better to use than the mean because the mean changes with skew or outliers and the median is more robust. A quartile is each of three values in which the data can be distributed into even fourths. I think that R gives us the 1st quartile and 3rd quartile because they can be used to calculate the interquartile range, which tells us the interval where half of the values within the data set lie. The median is also the 2nd quartile, so the three groups are given that split the data in even fourths.</strong></p>
</div>
<div id="problem-7" class="section level3">
<h3>Problem 7</h3>
<p>Repeat the same steps you followed for <code>Murder</code>, for the variables <code>Assault</code> and <code>Rape</code>. Now plot all three histograms together. You can do this by using the command <code>par(mfrow=c(3,1))</code> and then plotting each of the three.</p>
<pre class="r"><code>#make a histogram of assault
hist(dat$Assault, main = &quot;Histogram of Assault Arrests&quot;, xlab = &quot;Number of Assault Arrests&quot;, ylab = &quot;Frequency&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-7-1.png" width="480" /></p>
<pre class="r"><code>#make a histogram of rape
hist(dat$Rape, main = &quot;Histogram of Rape Arrests&quot;, xlab = &quot;Number of Rape Arrests&quot;, ylab = &quot;Frequency&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-7-2.png" width="480" /></p>
<pre class="r"><code>#plot all three histograms together
par(mfrow=c(3,1))
hist(dat$Murder, main = &quot;Histogram of Murder Arrests&quot;, xlab = &quot;Number of Murder Arrests&quot;, ylab = &quot;Frequency&quot;)
hist(dat$Assault, main = &quot;Histogram of Assault Arrests&quot;, xlab = &quot;Number of Assault Arrests&quot;, ylab = &quot;Frequency&quot;)
hist(dat$Rape, main = &quot;Histogram of Rape Arrests&quot;, xlab = &quot;Number of Rape Arrests&quot;, ylab = &quot;Frequency&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-7-3.png" width="480" /></p>
<p>What does the command par do, in your own words (you can look this up by asking R <code>?par</code>)?</p>
<p><strong>Par can be used to set the parameters on a graph, making it easier to combine multiple graphs into one.</strong></p>
<p>What can you learn from plotting the histograms together?</p>
<p><strong>By plotting these histograms together, you can compare the arrest rates for each crime. Murders happen the least frequently and assaults happen the most frequently. You can also see that the histogram for murder is unimodal and skewed, the histogram for assaults is bimodal, and the histogram for rapes is also unimodal and skewed.</strong></p>
</div>
<div id="problem-8" class="section level3">
<h3>Problem 8</h3>
<p>In the console below (not in text), type <code>install.packages("maps")</code> and press Enter, and then type <code>install.packages("ggplot2")</code> and press Enter. This will install the packages so you can load the libraries.</p>
<pre class="r"><code>#install and load in the maps and ggplot2 packages
library(&#39;maps&#39;) 
library(&#39;ggplot2&#39;) </code></pre>
<p>Run this code:</p>
<pre class="r"><code>ggplot(dat, aes(map_id=state, fill=Murder)) + 
  geom_map(map=map_data(&quot;state&quot;)) + 
  expand_limits(x=map_data(&quot;state&quot;)$long, y=map_data(&quot;state&quot;)$lat)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-9-1.png" width="720" /> What does this code do? Explain what each line is doing.</p>
<p><strong>The first line above the map code loads the library for both packages. The first line of the map code is creating a plot of murder. The ggplot function is telling R to create a plot, the “dat” is telling R which dataset to use in the plot, and the “aes(map_id=state, fill=Murder))” is telling R to plot each state and fill it with the corresponding murder arrest rate. The geom_map function creates shapes for a reference map, and the map=map_data(“state”) function is telling R to map the data that corresponds with the state variable that we created earlier. The expand_limits function makes sure that the entire map fits within the plot of the graph and the (x=map_data(“state”)<span class="math inline">\(long, y=map_data(&quot;state&quot;)\)</span>lat) tells R which data to base the plot limits off of, which in this case is the state data.</strong></p>
</div>
</div>
<div id="assignment-2" class="section level1">
<h1>Assignment 2</h1>
<div id="problem-1-1" class="section level3">
<h3>Problem 1</h3>
<p>Load in the data.</p>
<pre class="r"><code>dat &lt;- read.csv(file = &quot;data/Assignment2datacopy.csv&quot;)</code></pre>
<p>What are the dimensions of the dataset?</p>
<pre class="r"><code>dim(dat)</code></pre>
<pre><code>## [1] 171   7</code></pre>
<p><strong>There are 171 columns and 7 rows (or 171 respondents and 7 questions)</strong></p>
</div>
<div id="problem-2-1" class="section level3">
<h3>Problem 2</h3>
<p>Describe the variables in the dataset.</p>
<pre class="r"><code>names(dat)</code></pre>
<pre><code>## [1] &quot;mjage&quot;     &quot;cigage&quot;    &quot;iralcage&quot;  &quot;age2&quot;      &quot;sexatract&quot; &quot;speakengl&quot;
## [7] &quot;irsex&quot;</code></pre>
<p><strong>There are 7 variables in the dataset:</strong> <strong>1. “mjage” (How old were you the first time you used marijuana or hashish?)</strong> <strong>2. “cigage” (How old were you when you first started smoking cigarettes everyday?)</strong> <strong>3. “iralcage” (How old were you when you first tried alcohol?)</strong> <strong>4. “age2” (Recoded final edited age (since respondents had multiple chances to change their age throughout the survey))</strong> <strong>5. “sexatract” (Sexual attraction)</strong> <strong>6. “speakengl” (How well do you speak English)</strong> <strong>7. “irsex” (Imputation revised gender)</strong></p>
<p><strong>Mjage, cigage, and iralcage are numeric variables (or quantitative) because the respondent gave an exact number for their answers for each variable and functions like mean can be applied to find the average age the respondents tried marijuana, cigarettes, and alcohol. Age2, sexatract, speakengl, and irsex are categorical variables because the respondents’ answers were split into categories when coded. Because respondents had the opportunity to change their age throughout the interview, the age variable was calculated from the raw birth date and the final edited interview date, the age entered in the questionnaire roster (if it exists), and the pre-interview screener age because interviewees had the opportunity to change their age throughout the interview.</strong></p>
<p>What is this dataset about? Who collected the data, what kind of sample is it, and what was the purpose of generating the data? <strong>The dataset is a small sample from the National Survey of Drug Use and Health, which was conducted by the Center for Behavioral Health Statistics and Quality (CBHSQ, formerly the Office of Applied Studies) within the Substance Abuse and Mental Health Services Administration (SAMHSA) and is conducted by RTI International, Research Triangle Park, North Carolina. The survey was conducted through a computer assisted administration, and was changed from a strictly national design to a state-based sampling plan in 1999. The primary purpose of generating the data was to measure the prevalence and correlation of substance use and mental health issues in the United States, according to the NSDUH 2019 Codebook.</strong></p>
</div>
<div id="problem-3-age-and-gender" class="section level3">
<h3>Problem 3: Age and gender</h3>
<p>What is the age distribution of the sample like? Make sure you read the codebook to know what the variable values mean.</p>
<pre class="r"><code>hist(dat$age2, main = &quot;Histogram of Recoded Final Edited Age Categories&quot;, xlab = &quot;Recoded Final Edited Age Categories&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-13-1.png" width="672" /> <strong>The age variable is skewed to the left, with the majority of the values in the 14-16 bin (which means that the majority of the people in the dataset are 30 to 64 years old, according to the codebook). There are fewer people who were very young when filling out the survey, with only a few in the 4-6 and 6-8 bins (meaning that the respondents in these bins were 15-17 and 18-19, respectively).</strong></p>
<p>Do you think this age distribution representative of the US population? Why or why not?</p>
<pre class="r"><code>min(dat$age2) #the youngest respondent was 15 (category 4)</code></pre>
<pre><code>## [1] 4</code></pre>
<pre class="r"><code>max(dat$age2) #the oldest respondent was 65 years old or older (category 17)</code></pre>
<pre><code>## [1] 17</code></pre>
<p><strong>Yes, I think that this age distribution is representative of the US population. The survey was conducted in order to evaluate drug use, and I would think that people would not try drugs before turning 15 (the youngest respondent) and very few people would continue using drugs when they are 65 years old or older (the oldest respondent). Also, according to the codebook, the participants were randomly selected to complete the survey, which fulfills one requirement of a representative sample. It makes sense that the number of respondents increased when the respondents were 19 to 23 (8 to 12 categories) as those are the ages when most people would be exposed to marijuana, drugs, and alcohol for the first time, and that the number of respondents increased again when the respondents were 24 to 64 (categories 12 to 16), as those are the ages that people would continue to use marijuana, drugs, and alcohol as adults (especially after potentially being exposed in college). I also think that it makes sense that the majority of respondents were 34 to 64 years old, because older generations are more likely to have smoked cigarettes everyday before perception and knowledge changed.</strong></p>
<p>Is the sample balanced in terms of gender? If not, are there more females or males?</p>
<pre class="r"><code>table(dat$irsex, dat$age2)</code></pre>
<pre><code>##    
##      4  6  7  8  9 10 11 12 13 14 15 16 17
##   1  1  1  1  0  1  1  3  3 14 10 33 14  9
##   2  1  0  0  2  6  2  3  4 13  6 29 10  4</code></pre>
<p><strong>The sample is not balanced in terms of gender. There were 91 males included in the dataset and 80 females included.</strong></p>
<p>Use this code to draw a stacked bar plot to view the relationship between sex and age. What can you conclude from this plot?</p>
<pre class="r"><code>tab.agesex &lt;- table(dat$irsex, dat$age2)
barplot(tab.agesex,
        main = &quot;Stacked barchart&quot;,
        xlab = &quot;Age category&quot;, ylab = &quot;Frequency&quot;,
        legend.text = rownames(tab.agesex),
        beside = FALSE) # Stacked bars (default)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-16-1.png" width="672" /> <strong>From this plot, I can conclude that more males answered the survey than females, as most age categories have a higher frequency of males than females (especially in categories 6 and 7). I can also conclude than more older males answered the survey than older females. As indicated in both the plot and the table of sex and age categories, the highest five categories (13, 14, 15, 16, and 17) had more male responses than females (1 more, 4 more, 4 more, 4 more, and 5 more, respectively).</strong></p>
</div>
<div id="problem-4-substance-use" class="section level3">
<h3>Problem 4: Substance use</h3>
<p>For which of the three substances included in the dataset (marijuana, alcohol, and cigarettes) do individuals tend to use the substance earlier?</p>
<pre class="r"><code>boxplot(dat$mjage, dat$cigage, dat$iralcage, main = &quot;Substance Usage and Age&quot;,
        ylab=&quot;Age&quot;, xlab=&quot;Types of Substances&quot;, 
        names=c(&quot;Marijuana or Hashish&quot;,&quot;Cigarettes&quot;,&quot;Alcohol&quot;))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-17-1.png" width="672" /> <strong>Based on the boxplot of substance usage and age, it looks like individuals tend to use alcohol earlier than marijuana / hashish or earlier than they started smoking cigarettes every day.</strong></p>
<pre class="r"><code>min(dat$mjage) </code></pre>
<pre><code>## [1] 7</code></pre>
<pre class="r"><code>min(dat$cigage) </code></pre>
<pre><code>## [1] 10</code></pre>
<pre class="r"><code>min(dat$iralcage) </code></pre>
<pre><code>## [1] 5</code></pre>
<p><strong>Looking at the minimum values for each type of substance, the minimum recorded age for when an individual first tried marijuana / hashish was 7, the minimum recorded age for when an individual first started smoking cigarettes everyday was 10, and the minimum recorded age for when an individual first tried alcohol was 5. This also confirms that like individuals tend to use alcohol earlier than marijuana / hashish or earlier than they started smoking cigarettes every day.</strong></p>
</div>
<div id="problem-5-sexual-attraction" class="section level3">
<h3>Problem 5: Sexual attraction</h3>
<p>What does the distribution of sexual attraction look like? Is this what you expected?</p>
<pre class="r"><code>dat.sexat &lt;- subset(dat$sexatract, subset = dat$sexatract&lt;7)

hist(dat.sexat, main = &quot;Distribution of Sexual Attraction&quot;, xlab = &quot;Sexual Attraction&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-19-1.png" width="672" /> <strong>The distribution of sexual attraction is skewed to the right, with the majority of respondents answering that they are only attracted to the opposite sex (category one). The next greatest frequency of response is that the respondent is mostly attracted to the opposite sex (category 2), and then followed by the respondent is equally attracted to males and females (category 3). This is exactly what I expected because I would think that an overwhelming majority of people would be straight as that is most common in the United States.</strong></p>
<p>What is the distribution of sexual attraction by gender?</p>
<pre class="r"><code>table(dat$irsex, dat$sexatract)</code></pre>
<pre><code>##    
##      1  2  3  4  5  6 99
##   1 82  3  0  1  2  1  2
##   2 54 13  9  2  1  0  1</code></pre>
<pre class="r"><code>library(dplyr) 

dat$sexatract &lt;- dat$sexatract %&gt;% na_if(., &quot;85&quot;)
dat$sexatract &lt;- dat$sexatract %&gt;% na_if(., &quot;94&quot;)
dat$sexatract &lt;- dat$sexatract %&gt;% na_if(., &quot;97&quot;)
dat$sexatract &lt;- dat$sexatract %&gt;% na_if(., &quot;98&quot;)
dat$sexatract &lt;- dat$sexatract %&gt;% na_if(., &quot;99&quot;)

dat.five &lt;- data.frame(dat$sexatract, dat$irsex)

barplot &lt;- barplot(table(dat.five$dat.irsex, dat.five$dat.sexatract),
        main = &quot;Sexual Attraction and Gender&quot;,
        xlab = &quot;Sexaul Attraction Category&quot;,
        ylab = &quot;Count&quot;,
        border = &quot;black&quot;,
        col = c(&quot;hotpink1&quot;, &quot;blue&quot;),
        ylim = c(0,171), legend.text = c(&quot;Males&quot;,&quot;Females&quot;),
        )</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<pre class="r"><code>barplot</code></pre>
<pre><code>## [1] 0.7 1.9 3.1 4.3 5.5 6.7</code></pre>
<p><strong>Looking at the stacked bar plot of sexual attraction and gender, it confirms what was seen in the table that more males than females responded that they are only attracted to the opposite sex (category one). It also confirms that more females than males answered that they are mostly attracted to the opposite sex (category 2) and are equally attracted to males and females (category 3).</strong></p>
</div>
<div id="problem-6-english-speaking" class="section level3">
<h3>Problem 6: English speaking</h3>
<p>What does the distribution of English speaking look like in the sample?</p>
<pre class="r"><code>hist(dat$speakengl, main = &quot;Histogram of English Speakers&quot;, xlab = &quot;How Well You Speak English (1 - lowest, 4 - highest)&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-21-1.png" width="672" /> <strong>The distribution of English speaking looks extremely skewed to the right, with the majority of respondents answering that they speak English very well (category one).</strong></p>
<pre class="r"><code>table(dat$speakengl)</code></pre>
<pre><code>## 
##   1   2   3 
## 161   8   2</code></pre>
<p><strong>Looking at the table of respondents who answered the “Speak English” question,161 people answered that the speak English very well, eight answered that they speak English well, and only two answered that they speak English not well. This confirms the skew seen in the histogram.</strong></p>
<p>Is this what you might expect for a random sample of the US population? <strong>This is what I would expect a random sample of the US population to look like, as the majority of people in the US speak English and speak it very well. Even if there were people included in the random sample from places that do not speak as much English, like Texas or Miami, for example, the large amount of people who do speak English well would account for what is seen in the histogram.</strong></p>
<p>Are there more English speaker females or males?</p>
<pre class="r"><code>table(dat$irsex, dat$speakengl)</code></pre>
<pre><code>##    
##      1  2  3
##   1 84  7  0
##   2 77  1  2</code></pre>
<pre class="r"><code>barplot(table(dat$irsex, dat$speakengl),
        main=&quot;English Speaking Level and Gender&quot;,
        xlab=&quot;English Speaking Level Category&quot;,
        ylab=&quot;Count&quot;,
        col=c(&quot;hotpink1&quot;, &quot;blue&quot;),
        ylim = c(0,200),  legend.text = c(&quot;Males&quot;,&quot;Females&quot;)
)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-23-1.png" width="672" /> <strong>Looking at the stacked bar plot of English speaking level and gender, it looks like the number of males and females that answered that they spoke English very well was pretty close, will a few more males (exactly 11, according to the table). The plot also confirms that more men responded that they spoke English well than women, and that no men responded that they spoke English not well.</strong></p>
</div>
</div>
<div id="exam-1" class="section level1">
<h1>Exam 1</h1>
<div id="instructions" class="section level2">
<h2>Instructions</h2>
<ol style="list-style-type: lower-alpha">
<li><p>Create a folder in your computer (a good place would be under Crim 250, Exams).</p></li>
<li><p>Download the dataset from the Canvas website (fatal-police-shootings-data.csv) onto that folder, and save your Exam 1.Rmd file in the same folder.</p></li>
<li><p>Download the README.md file. This is the codebook.</p></li>
<li><p>Load the data into an R data frame.</p></li>
</ol>
<pre class="r"><code>dat &lt;- read.csv(file = &quot;data/fatal-police-shootings-datacopy.csv&quot;)</code></pre>
<div id="problem-1-10-points" class="section level3">
<h3>Problem 1 (10 points)</h3>
<ol style="list-style-type: lower-alpha">
<li>Describe the dataset. This is the source: <a href="https://github.com/washingtonpost/data-police-shootings" class="uri">https://github.com/washingtonpost/data-police-shootings</a> . Write two sentences (max.) about this.</li>
</ol>
<p><strong>The dataset is made up of every fatal police shooting in the US since January 1, 2015, as collected by the Washington Post. The dataset includes 6594 people and 17 variables, which contain important information about each shooting, such as the name of the person shot, their mental health status, and their race.</strong></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>How many observations are there in the data frame?</li>
</ol>
<pre class="r"><code>dim(dat)</code></pre>
<pre><code>## [1] 6594   17</code></pre>
<p><strong>There are 6594 observations in the data frame.</strong></p>
<ol start="3" style="list-style-type: lower-alpha">
<li>Look at the names of the variables in the data frame. Describe what “body_camera”, “flee”, and “armed” represent, according to the codebook. Again, only write one sentence (max) per variable.</li>
</ol>
<pre class="r"><code>names(dat)</code></pre>
<pre><code>##  [1] &quot;id&quot;                      &quot;name&quot;                   
##  [3] &quot;date&quot;                    &quot;manner_of_death&quot;        
##  [5] &quot;armed&quot;                   &quot;age&quot;                    
##  [7] &quot;gender&quot;                  &quot;race&quot;                   
##  [9] &quot;city&quot;                    &quot;state&quot;                  
## [11] &quot;signs_of_mental_illness&quot; &quot;threat_level&quot;           
## [13] &quot;flee&quot;                    &quot;body_camera&quot;            
## [15] &quot;longitude&quot;               &quot;latitude&quot;               
## [17] &quot;is_geocoding_exact&quot;</code></pre>
<p><strong>The “body_camera” variable indicates whether or not news reports stated that a police officer that was at the scene of the incident was wearing a body camera and may have recorded parts of the incident. The “flee” variable indicates whether or not news reports have started that the victim was moving away from the officer during the incident. The “armed” variable indicates whether or not the victim was armed with any type of weapon that could have been thought to as possible to cause harm by an officer.</strong></p>
<ol start="4" style="list-style-type: lower-alpha">
<li>What are three weapons that you are surprised to find in the “armed” variable? Make a table of the values in “armed” to see the options.</li>
</ol>
<pre class="r"><code>head(table(dat$armed))</code></pre>
<pre><code>## 
##                 air conditioner      air pistol  Airsoft pistol              ax 
##             207               1               1               3              24 
##        barstool 
##               1</code></pre>
<p><strong>Three weapons that I was surprised to find in the dataset were an air conditioner, microphone, and pen.I feel like an air conditioner and microphone are definitely unusual weapons, and the pen does not seem like it would do anything against an officer’s gun.</strong></p>
</div>
<div id="problem-2-10-points" class="section level3">
<h3>Problem 2 (10 points)</h3>
<ol style="list-style-type: lower-alpha">
<li>Describe the age distribution of the sample. Is this what you would expect to see?</li>
</ol>
<pre class="r"><code>hist(dat$age, main = &quot;Age Distribution of the Sample&quot;, xlab = &quot;Age&quot;, xlim = c(0, 100))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p><strong>The age distribution of the sample is skewed to the right, with a large number of values between ages 20 and 40. This indicates that most people killed by the police in fatal shootings are young, and that older people between ages 60 and 100 are being killed in fatal police shootings at a much lower rate. This is exactly what I expected to see in the age distribution because younger people, especially in the 20 to 40 year old range, are more likely to have encounters with the police, as well as be healthy and be able to try to talk to or provoke the police and try to run away.</strong></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>To understand the center of the age distribution, would you use a mean or a median, and why? Find the one you picked.</li>
</ol>
<pre class="r"><code>median(dat$age, na.rm = TRUE)</code></pre>
<pre><code>## [1] 35</code></pre>
<p><strong>To understand the center of the age distribution, I would use the median because the data is skewed to the right and the median is a more robust measure of skewed data as the mean changes with skew or outliers. The median of the age distribution for this dataset is 35 years old, and I removed the missing values since there are only 308 of them out of 6594 observations and they indicate that the person’s age was unknown or missing.</strong></p>
<ol start="3" style="list-style-type: lower-alpha">
<li>Describe the gender distribution of the sample. Do you find this surprising?</li>
</ol>
<pre class="r"><code>table(dat$gender)</code></pre>
<pre><code>## 
##         F    M 
##    3  293 6298</code></pre>
<pre class="r"><code>counts &lt;- table(dat$gender, useNA = &quot;ifany&quot;)
barplot(counts, main = &quot;Gender Distrubution&quot;, xlab = &quot;Gender&quot;, ylab = &quot;Counts&quot;, names=c(&quot;None&quot;, &quot;Females&quot;, &quot;Males&quot;))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<p><strong>The gender distribution is definitely skewed, with 6005 more males being fatally shot by police officers than females. This can also be seen in the barplot, with the majority of respondents being males. There were also 3 unknown values in the data, indicating no gender according to the codebook. I do not find this surprising, however, because the majority of police shootings that we hear about in the news are of males, with the rare occurrence of a female. While females are definitely still being killed by the police, it is happening disproportionately to males which is indicated by both the news and the data.</strong></p>
</div>
<div id="problem-3-10-points" class="section level3">
<h3>Problem 3 (10 points)</h3>
<ol style="list-style-type: lower-alpha">
<li>How many police officers had a body camera, according to news reports? What proportion is this of all the incidents in the data? Are you surprised that it is so high or low?</li>
</ol>
<pre class="r"><code>table(dat$body_camera)</code></pre>
<pre><code>## 
## False  True 
##  5684   910</code></pre>
<pre class="r"><code>910/6594</code></pre>
<pre><code>## [1] 0.1380042</code></pre>
<p><strong>According to the news reports, 910 police officers had a body camera, which is about 13.80% of all incidents in the data. I am surprised that this is so low because I would think that after the 2014 killing of Michael Brown and subsequent police shootings, police offices and the public would call for an increased use of body cameras.</strong></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>In how many of the incidents was the victim fleeing? What proportion is this of the total number of incidents in the data? Is this what you would expect?</li>
</ol>
<pre class="r"><code>table(dat$flee)</code></pre>
<pre><code>## 
##                     Car        Foot Not fleeing       Other 
##         491        1058         845        3952         248</code></pre>
<pre class="r"><code>1058+845+248 #fleeing</code></pre>
<pre><code>## [1] 2151</code></pre>
<pre class="r"><code>2151/6594</code></pre>
<pre><code>## [1] 0.3262056</code></pre>
<p><strong>There are 2151 incidents of the victim fleeing, which is about 32.62% of all incidents in the data. This was calculated by including the 491 unknown observations in the “not fleeing” group, as what this category of observations represents was not included in the codebook and cannot be assumed to be fleeing, especially since there is already an “other” group. This is pretty much what I would expect because I would think that the majority of people when interacting with the police would not flee, since it is known that the consequences would probably be worse because of it.</strong></p>
</div>
<div id="problem-4-10-points---answer-only-one-of-these-a-or-b." class="section level3">
<h3>Problem 4 (10 points) - Answer only one of these (a or b).</h3>
<ol style="list-style-type: lower-alpha">
<li>Describe the relationship between the variables “body camera” and “flee” using a stacked barplot. What can you conclude from this relationship?</li>
</ol>
<p><em>Hint 1: The categories along the x-axis are the options for “flee”, each bar contains information about whether the police officer had a body camera (vertically), and the height along the y-axis shows the frequency of that category).</em></p>
<p><em>Hint 2: Also, if you are unsure about the syntax for barplot, run ?barplot in R and see some examples at the bottom of the documentation. This is usually a good way to look up the syntax of R code. You can also Google it.</em></p>
<pre class="r"><code>library(ggplot2) 
ggplot(dat, aes(fill=body_camera, y=frequency(body_camera), x=flee)) + 
  geom_bar(position=&quot;stack&quot;, stat=&quot;identity&quot;) +
  ggtitle(&quot;Stacked Barplot of Body Camera Usage and Victim Fleeing&quot;) +
  labs(y=&quot;Frequency of Body Camera Usage&quot;, x = &quot;How the Victim Fled&quot;) +
  labs(fill = &quot;Body Camera Usage&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
<p><strong>From the plot, it can be seen that everybody that fled from the police did so more often when the police were not wearing a body camera. It looks like not fleeing and the police wearing a body camera are related, as when more police wore a body camera less people fled (since the not fleeing bar had the most police wearing a body camera). You can also see that the most people fled by using a car, which during those indicidents police were less likely to wear a body camera than to actually have it on. While it is unknown what the first bar represents as it is left out of the codebook, it follows the same pattern of the other bars that the police did not wear body cameras more often than they did.</strong></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>Describe the relationship between age and race by using a boxplot. What can you conclude from this relationship?</li>
</ol>
<p><em>Hint 1: The categories along the x-axis are the race categories and the height along the y-axis is age.</em></p>
<p><em>Hint 2: Also, if you are unsure about the syntax for boxplot, run ?boxplot in R and see some examples at the bottom of the documentation. This is usually a good way to look up the syntax of R code. You can also Google it.</em></p>
<pre class="r"><code>boxplot &lt;- ggplot(dat, aes(x=race, y=age)) + 
  geom_boxplot() +
  ggtitle(&quot;Boxplot of Race and Age&quot;)
boxplot</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-34-1.png" width="672" /></p>
<p><strong>The relationship between race and age looks pretty even, with the median values of age for each race category between 25 and 37. The range for all ages except White is between 12 and 62, while the White range extends from about 5 to 80. There are a significant number of outliers, however, for the Black, Hispanic, and White categories. The NAs for age were removed, and the unknown race category was plotted first on the graph but cannot be interpreted as it is not in the codebook. From this relationship, I can conclude that on average, all races of a similar age between 25 and 37 are killed at similar rates. While there are some outliers to this, especially for the Black and Hispanic categories, all of the medians of age for each race is almost identical.</strong></p>
</div>
<div id="extra-credit-10-points" class="section level3">
<h3>Extra credit (10 points)</h3>
<ol style="list-style-type: lower-alpha">
<li>What does this code tell us?</li>
</ol>
<pre class="r"><code>mydates &lt;- as.Date(dat$date)
head(mydates)
(mydates[length(mydates)] - mydates[1])</code></pre>
<p><strong>The as.Date function in R converts the string of date values into actual dates that functions can be applied to. The head function makes sure that this conversion was done correctly by showing us the first 6 values of the data. The “(mydates[length(mydates)] - mydates[1])” function tells us the time difference between the last observation (which is the entire length of mydates) and the first obeservation (which is "mydates[1]), which ends up being 2458 days.</strong></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>On Friday, a new report was published that was described as follows by The Guardian: “More than half of US police killings are mislabelled or not reported, study finds.” Without reading this article now (due to limited time), why do you think police killings might be mislabelled or underreported?</li>
</ol>
<p><strong>I think that police killings may be mislabeled or underreported because police offices do not want to admit to have killing anyone or engaging in illegal or overly forceful activities. I think that there may be disparities between the police reporting shooting and witnesses observing shootings, as police offices may be less likely to do so. I also think that police offices may mislabel the shooting as something that was not their fault so that they do not get attacked by the public for the incident.</strong></p>
<ol start="3" style="list-style-type: lower-alpha">
<li>Regarding missing values in problem 4, do you see any? If so, do you think that’s all that’s missing from the data?</li>
</ol>
<p><strong>Yes, I saw missing values in problem 4 in the age category. The race and fleeing variable also had unknown values, as it was not indicated by the codebook. I do not think that this is all that is missing from the data, as other variables, such as gender, also had missing or unknown values. I think that going along with part b, some of the data reported was mislabeled or incorrect, and this may be represented by the missing or unknown values in the data.</strong></p>
</div>
</div>
</div>
<div id="assignment-3" class="section level1">
<h1>Assignment 3</h1>
<p>Load the data.</p>
<pre class="r"><code>library(readr)
library(knitr)
dat.crime &lt;- read_delim(&quot;/Users/briannafisher/Dropbox/CRIM250/Data/crime_simple.txt&quot;, delim = &quot;\t&quot;)</code></pre>
<p>This is a dataset from a textbook by Brian S. Everitt about crime in the US in 1960. The data originate from the Uniform Crime Report of the FBI and other government sources. The data for 47 states of the USA are given.</p>
<p>Here is the codebook:</p>
<p>R: Crime rate: # of offenses reported to police per million population</p>
<p>Age: The number of males of age 14-24 per 1000 population</p>
<p>S: Indicator variable for Southern states (0 = No, 1 = Yes)</p>
<p>Ed: Mean of years of schooling x 10 for persons of age 25 or older</p>
<p>Ex0: 1960 per capita expenditure on police by state and local government</p>
<p>Ex1: 1959 per capita expenditure on police by state and local government</p>
<p>LF: Labor force participation rate per 1000 civilian urban males age 14-24</p>
<p>M: The number of males per 1000 females</p>
<p>N: State population size in hundred thousands</p>
<p>NW: The number of non-whites per 1000 population</p>
<p>U1: Unemployment rate of urban males per 1000 of age 14-24</p>
<p>U2: Unemployment rate of urban males per 1000 of age 35-39</p>
<p>W: Median value of transferable goods and assets or family income in tens of $</p>
<p>X: The number of families per 1000 earning below 1/2 the median income</p>
<p>We are interested in checking whether the reported crime rate (# of offenses reported to police per million population) and the average education (mean number of years of schooling for persons of age 25 or older) are related.</p>
<div id="problem-1-2" class="section level3">
<h3>Problem 1</h3>
<p>How many observations are there in the dataset? To what does each observation correspond?</p>
<pre class="r"><code>dim(dat.crime)</code></pre>
<pre><code>## [1] 47 14</code></pre>
<p><strong>There are 47 observations in the dataset, with 14 different variables. Each observation corresponds to a particular state.</strong></p>
</div>
<div id="problem-2-2" class="section level3">
<h3>Problem 2</h3>
<p>Draw a scatterplot of the two variables. Calculate the correlation between the two variables. Can you come up with an explanation for this relationship?</p>
<pre class="r"><code>plot(dat.crime$Ed, dat.crime$R, main = &quot;Scatterplot of Average Education and Reported Crime Rate&quot;, xlab = &quot;mean number of years of schooling for persons of age 25 or older times 10&quot;, ylab = &quot;# of offenses reported to police per million population&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-38-1.png" width="576" /></p>
<pre class="r"><code>cor(dat.crime$R, dat.crime$Ed)</code></pre>
<pre><code>## [1] 0.3228349</code></pre>
<p><strong>The correlation of the reported crime rate (measured in the number of offenses reported to police per million population) and average education (measured in the mean number of years of schooling for persons of age 25 or older times 10) is 0.32, which is pretty weak. The scatterplot of these variables proves this, as it is positive but fairly spread out. One explanation for this relationship may be that states with bigger cities are populated by people with more years of education than states with rural areas, and states with bigger cities have higher reported crime rates. While these two variables specificaly are not highly correlated (since the value was 0.32), high average education and high reported crime rates are both characteristic of states with big cities.</strong></p>
</div>
<div id="problem-3-1" class="section level3">
<h3>Problem 3</h3>
<p>Regress reported crime rate (y) on average education (x) and call this linear model <code>crime.lm</code> and write the summary of the regression by using this code, which makes it look a little nicer <code>{r, eval=FALSE} kable(summary(crime.lm)$coef, digits = 2)</code>.</p>
<pre class="r"><code>crime.lm &lt;- lm(formula = R ~ Ed, data = dat.crime)

summary(crime.lm)</code></pre>
<pre><code>## 
## Call:
## lm(formula = R ~ Ed, data = dat.crime)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -60.061 -27.125  -4.654  17.133  91.646 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)  
## (Intercept) -27.3967    51.8104  -0.529   0.5996  
## Ed            1.1161     0.4878   2.288   0.0269 *
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 37.01 on 45 degrees of freedom
## Multiple R-squared:  0.1042, Adjusted R-squared:  0.08432 
## F-statistic: 5.236 on 1 and 45 DF,  p-value: 0.02688</code></pre>
</div>
<div id="problem-4-1" class="section level3">
<h3>Problem 4</h3>
<ol start="4" style="list-style-type: decimal">
<li>Are the four assumptions of linear regression satisfied? To answer this, draw the relevant plots. (Write a maximum of one sentence per assumption.)</li>
</ol>
<pre class="r"><code>#linearity and independence assumptions - residuals vs. x plot
plot(dat.crime$Ed, crime.lm$residuals, ylim=c(-15,15), main=&quot;Residuals vs. Average Education&quot;, xlab=&quot;mean number of years of schooling for persons of age 25 or older times 10&quot;, ylab=&quot;Residuals&quot;)
abline(h = 0, lty=&quot;dashed&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-41-1.png" width="672" /></p>
<pre class="r"><code>#linearity assumption - residuals vs. fitted
plot(crime.lm, which=1)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-42-1.png" width="672" /></p>
<p><strong>Both the residuals vs. x plot and residuals vs. fitted plot show no clear linear patterns and the residuals appear evenly spread out above and below both lines, so it satisfies the linearity assumption (because there are also only 47 observations, with the number that are given we can assume this is good enough for linear regression).</strong></p>
<p><strong>Looking again at the residuals vs. x plot, we see that there are no patterns in the plot, so the independence assumption is fulfilled.</strong></p>
<pre class="r"><code>#equal variance / homoscedasticity assumption - resuiduals vs. predicted values
plot(crime.lm, which=3)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-43-1.png" width="672" /></p>
<p><strong>Looking at the residuals plotted against the predicted values, the red line looks pretty flat and there are no significant trends in the red line, so the equal variance / homoscedasticity assumption looks satisfied, but the scatterplot we made earlier shows no strong linear association.</strong></p>
<pre class="r"><code>#Normal population assumption - residuals vs. leverage plot
plot(crime.lm, which=5)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-44-1.png" width="672" /></p>
<pre class="r"><code>#Normal population assumption - Normal qq plot
plot(crime.lm, which=2)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-45-1.png" width="672" /></p>
<p><strong>The residuals vs. leverage plot fulfills the normal population assumption as the values are within Cook’s distance, but the normal qq plot looks like there is an issue with some of the values curving, especially since we know these are not outliers.</strong></p>
</div>
<div id="problem-5-1" class="section level3">
<h3>Problem 5</h3>
<p>Is the relationship between reported crime and average education statistically significant? Report the estimated coefficient of the slope, the standard error, and the p-value. What does it mean for the relationship to be statistically significant?</p>
<p><strong>The relationship between reported crime rates and average education is statistically significant. The coefficient of the slope is 1.1161, which means that on average, for every additional year of average education, the reported crime rate increases by 1.1161 offenses reported to police per million population. The standard error is 0.4878, which means that the number of offenses reported to the police per million population can vary by 0.4878 offenses. The p-value is 0.02688, which means that we can reject the null hypothesis and conclude that there is a relationship between reported crime rates and average education. For the relationship to be statistically significant, it would mean that the p-value is less than 0.05, telling us that it is unlikely that the relationship between reported crime rates and average education is due to chance.</strong></p>
</div>
<div id="problem-6-1" class="section level3">
<h3>Problem 6</h3>
<p>How are reported crime and average education related? In other words, for every unit increase in average education, how does reported crime rate change (per million) per state?</p>
<p><strong>On average, for every additional year of average education, the reported crime rate increases by 1.1161 offenses reported to police per million population per state. </strong></p>
</div>
<div id="problem-7-1" class="section level3">
<h3>Problem 7</h3>
<p>Can you conclude that if individuals were to receive more education, then crime will be reported more often? Why or why not?</p>
<p><strong>You cannot conclude that if individuals were to receive more education, then crime will be reported more often. While the p-value indicates that there is some relationship between the two variables, the correlation between them is only 0.32 and the r-squared value is 0.1042. Neither of these values indicate a strong relationship between average education and reported crime rate. This statement also implies causation, that if people received more education then crime will decrease. Causation cannot be assumed, as there may be other causes or hidden variables that influence the decrease in crime rate with increased education. Similarly, this dataset is in relation to states, not individuals, so this statement could not be proven by this linear model.</strong></p>
</div>
</div>
<div id="exam-2" class="section level1">
<h1>Exam 2</h1>
<div id="instructions-1" class="section level2">
<h2>Instructions</h2>
<ol style="list-style-type: lower-alpha">
<li><p>Create a folder in your computer (a good place would be under Crim 250, Exams).</p></li>
<li><p>Download the dataset from the Canvas website (sim.data.csv) onto that folder, and save your Exam 2.Rmd file in the same folder.</p></li>
<li><p>Data description: This dataset provides (simulated) data about 200 police departments in one year. It contains information about the funding received by the department as well as incidents of police brutality. Suppose this dataset (sim.data.csv) was collected by researchers to answer this question: <strong>“Does having more funding in a police department lead to fewer incidents of police brutality?”</strong></p></li>
<li><p>Codebook:</p></li>
</ol>
<ul>
<li>funds: How much funding the police department received in that year in millions of dollars.</li>
<li>po.brut: How many incidents of police brutality were reported by the department that year.</li>
<li>po.dept.code: Police department code</li>
</ul>
<div id="problem-1-eda-10-points" class="section level3">
<h3>Problem 1: EDA (10 points)</h3>
<p>Describe the dataset and variables. Perform exploratory data analysis for the two variables of interest: funds and po.brut.</p>
<pre class="r"><code>dat &lt;- read.csv(file = &#39;/Users/briannafisher/Dropbox/CRIM250/CRIM 250 Github/BriannaFisher/data/sim.data.2.csv&#39;)

dim(dat)</code></pre>
<pre><code>## [1] 200   3</code></pre>
<pre class="r"><code>names(dat)</code></pre>
<pre><code>## [1] &quot;po.dept.code&quot; &quot;funds&quot;        &quot;po.brut&quot;</code></pre>
<p><strong>The dataset has 200 observations and 3 variables, with each observation corresponding to a particular police department. The variables are “po.dept.code”, which is the police department code, “funds”, which is the amount of funding the department received that year in millions of dollars, and “po.brut”, which is the number of incidents of police brutality reported by the department that year.</strong></p>
<pre class="r"><code>plot(dat$funds, dat$po.brut, main = &quot;Scatterplot of Department Funding and Police Brutality&quot;, xlab = &quot;Department Funding in Millions of Dollars that Year&quot;, ylab = &quot;Number of Incidents of Police Brutality that Year&quot;, xlim = c(0,100))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-47-1.png" width="672" /></p>
<pre class="r"><code>cor(dat$funds, dat$po.brut)</code></pre>
<pre><code>## [1] -0.9854706</code></pre>
<p><strong>Looking at the scatterplot of department funding and police brutality, it looks like the two have a strong, negative association. As department funding increases, it looks like reported police brutality incidents decreases. The two variables also have a correlation of -0.985, indicating that the two are strongly, negatively correlated.</strong></p>
</div>
<div id="problem-2-linear-regression-30-points" class="section level3">
<h3>Problem 2: Linear regression (30 points)</h3>
<ol style="list-style-type: lower-alpha">
<li>Perform a simple linear regression to answer the question of interest. To do this, name your linear model “reg.output” and write the summary of the regression by using “summary(reg.output)”.</li>
</ol>
<pre class="r"><code>reg.output &lt;- lm(formula = po.brut ~ funds, data = dat)
summary(reg.output)</code></pre>
<pre><code>## 
## Call:
## lm(formula = po.brut ~ funds, data = dat)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -3.9433 -0.2233  0.2544  0.5952  1.1803 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 40.543069   0.282503  143.51   &lt;2e-16 ***
## funds       -0.367099   0.004496  -81.64   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.9464 on 198 degrees of freedom
## Multiple R-squared:  0.9712, Adjusted R-squared:  0.971 
## F-statistic:  6666 on 1 and 198 DF,  p-value: &lt; 2.2e-16</code></pre>
<ol start="2" style="list-style-type: lower-alpha">
<li>Report the estimated coefficient, standard error, and p-value of the slope. Is the relationship between funds and incidents statistically significant? Explain.</li>
</ol>
<p><strong>The relationship between reported incidents of police brutality and department funding is statistically significant. The estimated coefficient is -0.367, which means that one unit higher of funding is associated with 0.367 less reported incidents of police brutality. The standard error is 0.0045, which means that the number of reported incidents of police brutality can vary by 0.0045 incidents. The p-value is less than 2.2e-16, which means that we can reject the null hypothesis and conclude that there is a relationship between reported incidents of police brutality and department funding. For the relationship to be statistically significant, it would mean that the p-value is less than 0.05 (which 2.2e-16 is), telling us that it is unlikely that the relationship between reported incidents of police brutality and department funding is due to chance.</strong></p>
<ol start="3" style="list-style-type: lower-alpha">
<li>Draw a scatterplot of po.brut (y-axis) and funds (x-axis). Right below your plot command, use abline to draw the fitted regression line, like this:</li>
</ol>
<pre class="r"><code>plot(dat$funds, dat$po.brut, main = &quot;Scatterplot of Department Funding and Police Brutality&quot;, xlab = &quot;Department Funding in Millions of Dollars that Year&quot;, ylab = &quot;Number of Incidents of Police Brutality that Year&quot;, xlim = c(0,100))
abline(reg.output, col = &quot;red&quot;, lwd=2)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-50-1.png" width="576" /> Does the line look like a good fit? Why or why not?</p>
<p><strong>Looking at the scatterplot, the line does not look like a good fit. The points on the scatterplot look curved, with the values on both ends of the line curving away from the line. If the line was a good fit, it would have no pattern and the data would also form a straight line. However, looking at the regression output, the R squared is 0.9712, indicating that the model fits the data incredibly well. Because my eyes can be deceiving and I changed the x-axis of the plot to include 0 squishing the data more towards the end of the plot, I would go with the R squared value and say that the line is a good fit.</strong></p>
<ol start="4" style="list-style-type: lower-alpha">
<li>Are the four assumptions of linear regression satisfied? To answer this, draw the relevant plots. (Write a maximum of one sentence per assumption.) If not, what might you try to do to improve this (if you had more time)?</li>
</ol>
<p>Assumption 1</p>
<pre class="r"><code>#linearity and independence assumptions - residuals vs. x plot
plot(dat$funds, reg.output$residuals, ylim=c(-15,15), main=&quot;Residuals vs. Department Funding&quot;, xlab=&quot;Department Funding in Millions of Dollars that Year&quot;, ylab=&quot;Residuals&quot;)
abline(h = 0, lty=&quot;dashed&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-51-1.png" width="672" /></p>
<pre class="r"><code>#linearity assumption - residuals vs. fitted
plot(reg.output, which=1)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-52-1.png" width="672" /> <strong>Because both the residuals vs. x plot and residuals vs. fitted plot show clear curved patterns in the plots instead of no pattern at all, I would say that the linearity assumption is not satisfied.</strong></p>
<p>Assumption 2 <strong>Looking again at the residuals vs. x plot, we see that there is a curved pattern in the plot, so the independence assumption is not satisfied.</strong></p>
<p>Assumption 3</p>
<pre class="r"><code>#equal variance / homoscedasticity assumption - resuiduals vs. predicted values
plot(reg.output, which=3)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-53-1.png" width="672" /> <strong>Looking at both the scatterplot from question 1 and the scale-location plot, there is a clear pattern in the plot, so the equal variance / homoscedasticity assumption is not satisfied.</strong></p>
<p>Assumption 4</p>
<pre class="r"><code>#Normal population assumption - residuals vs. leverage plot
plot(reg.output, which=5)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-54-1.png" width="672" /></p>
<pre class="r"><code>#Normal population assumption - Normal qq plot
plot(reg.output, which=2)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-55-1.png" width="672" /> <strong>Looking at the residuals vs. leverage plot (it looks like many values are clustered at the top of the line) and the normal qq plot (the values on the ends of the line are curving away from the line), the normal population assumption is not satisfied.</strong></p>
<p><strong>Because none of the assumptions are satisfied, if I had more time I would perform some sort of transformation to the data. I would probably start with logging funds, because I know that wages are usually logged when performing linear regression and funds are a pretty similar type of variable.</strong></p>
<ol start="5" style="list-style-type: lower-alpha">
<li>Answer the question of interest based on your analysis: “Does having more funding in a police department lead to fewer incidents of police brutality?”</li>
</ol>
<p><strong>Based on my analysis, it cannot be concluded that having more funding in a police department leads to fewer incidents of police brutality, as this implies causation and there could be hidden variables influencing the relationship. However,it does seem like having more funding in a police department is associated with fewer incidents of police brutality. The scatterplot and correlation show a strong negative relationship between the variables, and the p-value is statistically significant indicating that this relationship is not due to chance. Also, I do not think that the linear model is the best way to represent the data without performing any transformations. All of the assumptions were not satisfied, and even the scatterplot indicates a slight curving pattern. Transforming the data may give more insight into the association between department funding and incidents of police brutality.</strong></p>
</div>
<div id="problem-3-data-ethics-10-points" class="section level3">
<h3>Problem 3: Data ethics (10 points)</h3>
<p>Describe the dataset. Considering our lecture on data ethics, what concerns do you have about the dataset? Once you perform your analysis to answer the question of interest using this dataset, what concerns might you have about the results?</p>
<p><strong>Considering our lecture on data ethics, I am concerned that the dataset is biased because the police brutality variable is based off of the reported incidents of police brutality by the departments themselves. There is no way to know if departments are under reporting brutality, so the numbers in the dataset may not be correct or may not actually be reporting the ground truth of police brutality. Once I performed my analysis, I am concerned that the results may interpreted that more funding leads to less brutality (as even stated in the question of interest). This, however, implies causation, and while there is a relationship between the two variables there may be another hidden variable that is truly causing the association. It may be that having more funding leads to better service programs being provided by the police which leads to decreased police brutality, but that is something that cannot be proven with this dataset and analysis. In terms of implications, a policy maker may look at this analysis and think that increasing funding is the best solution to decreasing police brutality, which other research has proven that may not be the case. This analysis could, essentially, cause more harm if all police departments had an increase in funding but the funding was misused or put towards other things than decreasing police brutality.</strong></p>
</div>
</div>
</div>
<div id="assignment-4---active-readings" class="section level1">
<h1>Assignment 4 - Active Readings</h1>
<div id="chapter-3-data-visualization" class="section level2">
<h2>Chapter 3 Data Visualization</h2>
<div id="first-steps" class="section level3">
<h3>3.2 First Steps</h3>
<p>First load in the library tidyverse, which contains the dataset we want to analyze</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<p>Bring up the dataset we want to look at within the tidyverse, which is mpg</p>
<pre class="r"><code>mpg</code></pre>
<pre><code>## [38;5;246m# A tibble: 234 × 11[39m
##    manufacturer model      displ  year   cyl trans drv     cty   hwy fl    class
##    [3m[38;5;246m&lt;chr&gt;[39m[23m        [3m[38;5;246m&lt;chr&gt;[39m[23m      [3m[38;5;246m&lt;dbl&gt;[39m[23m [3m[38;5;246m&lt;int&gt;[39m[23m [3m[38;5;246m&lt;int&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;int&gt;[39m[23m [3m[38;5;246m&lt;int&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m
## [38;5;250m 1[39m audi         a4           1.8  [4m1[24m999     4 auto… f        18    29 p     comp…
## [38;5;250m 2[39m audi         a4           1.8  [4m1[24m999     4 manu… f        21    29 p     comp…
## [38;5;250m 3[39m audi         a4           2    [4m2[24m008     4 manu… f        20    31 p     comp…
## [38;5;250m 4[39m audi         a4           2    [4m2[24m008     4 auto… f        21    30 p     comp…
## [38;5;250m 5[39m audi         a4           2.8  [4m1[24m999     6 auto… f        16    26 p     comp…
## [38;5;250m 6[39m audi         a4           2.8  [4m1[24m999     6 manu… f        18    26 p     comp…
## [38;5;250m 7[39m audi         a4           3.1  [4m2[24m008     6 auto… f        18    27 p     comp…
## [38;5;250m 8[39m audi         a4 quattro   1.8  [4m1[24m999     4 manu… 4        18    26 p     comp…
## [38;5;250m 9[39m audi         a4 quattro   1.8  [4m1[24m999     4 auto… 4        16    25 p     comp…
## [38;5;250m10[39m audi         a4 quattro   2    [4m2[24m008     4 manu… 4        20    28 p     comp…
## [38;5;246m# … with 224 more rows[39m</code></pre>
<pre class="r"><code>#&gt; # A tibble: 234 x 11
#&gt;   manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class 
#&gt;   &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; 
#&gt; 1 audi         a4      1.8  1999     4 auto(l5)   f        18    29 p     compa…
#&gt; 2 audi         a4      1.8  1999     4 manual(m5) f        21    29 p     compa…
#&gt; 3 audi         a4      2    2008     4 manual(m6) f        20    31 p     compa…
#&gt; 4 audi         a4      2    2008     4 auto(av)   f        21    30 p     compa…
#&gt; 5 audi         a4      2.8  1999     6 auto(l5)   f        16    26 p     compa…
#&gt; 6 audi         a4      2.8  1999     6 manual(m5) f        18    26 p     compa…
#&gt; # … with 228 more rows</code></pre>
<p>Plot mpg with displ (a car’s engine size, in litres) on the x-axis and hwy (a car’s fuel efficiency on the highway, in miles per gallon) on the y-axis</p>
<pre class="r"><code>ggplot(data = mpg) + #telling ggplot which data to use
  geom_point(mapping = aes(x=displ, y=hwy)) #telling ggplot to make the data points on the plot, specifying which variables should go on each axis</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-58-1.png" width="672" /></p>
<p>Create a reusable template for making graphs (replace everything in brackets with the correct information)</p>
<pre class="r"><code>#ggplot(data = &lt;DATA&gt;) + 
 # &lt;GEOM_FUNCTION&gt;(mapping = aes(&lt;MAPPINGS&gt;))</code></pre>
<div id="exercises" class="section level4">
<h4>3. 2 Exercises</h4>
<ol style="list-style-type: decimal">
<li>Run ggplot(data = mpg). What do you see?</li>
</ol>
<pre class="r"><code>ggplot(data = mpg)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-60-1.png" width="672" /> <strong>I see a blank plot with nothing on it.</strong></p>
<ol start="2" style="list-style-type: decimal">
<li>How many rows are in mpg? How many columns?</li>
</ol>
<pre class="r"><code>dim(mpg)</code></pre>
<pre><code>## [1] 234  11</code></pre>
<p><strong>There are 234 rows in mpg and 11 columns.</strong></p>
<ol start="3" style="list-style-type: decimal">
<li>What does the drv variable describe? Read the help for ?mpg to find out.</li>
</ol>
<pre class="r"><code>?mpg</code></pre>
<p><strong>The drv varibale is the type of drive train, where f = front-wheel vehicle, r = rear wheel drive, and 4 = 4 wheel drive.</strong></p>
<ol start="4" style="list-style-type: decimal">
<li>Make a scatterplot of hwy vs cyl.</li>
</ol>
<pre class="r"><code>plot(mpg$hwy, mpg$cyl, main = &quot;Scatterplot of Fuel Efficiency versus Number of Cyinders&quot;, xlab = &quot;A car&#39;s fuel efficiency on the highway, in miles per gallon&quot;, ylab = &quot;Number of Cylinders&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-63-1.png" width="672" /></p>
<ol start="5" style="list-style-type: decimal">
<li>What happens if you make a scatterplot of class vs drv? Why is the plot not useful?</li>
</ol>
<pre class="r"><code>#plot(mpg$class, mpg$drv, main = &quot;Scatterplot of the Type of Car versus the Type of Drive Train&quot;, xlab = &quot;Type of Car&quot;, ylab = &quot;the type of drive train, where f = front-wheel vehicle, r = rear wheel drive, and 4 = 4 wheel drive&quot;)</code></pre>
<p><strong>This scatterplot is not useful because both variables are categorical, so they cannot be plotted on a scatterplot.</strong></p>
</div>
</div>
<div id="aesthetic-mappings" class="section level3">
<h3>3.3 Aesthetic mappings</h3>
<p>Mapping the colors of the points to tell us the class of each point on the plot</p>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, color = class))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-65-1.png" width="672" /></p>
<p>We can also map the class variable to the size aesthetic to make each type of car a different size point on the plot. This is not a good idea, however, because we are mapping an unordered variable such as class to an orderd aesthetic such as size.</p>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, size = class))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-66-1.png" width="672" /></p>
<pre class="r"><code>#&gt; Warning: Using size for a discrete variable is not advised.</code></pre>
<p>We could also map class by the alpha aesthetic, controlling the transparency of the points.</p>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, alpha = class))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-67-1.png" width="672" /></p>
<p>Or by the shape aesthetic, controlling the shape of the points. However, ggplot with only plot 6 shapes, so suv goes unplotted.</p>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, shape = class))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-68-1.png" width="672" /></p>
<p>We could set the aesthetic properties manually, for example, making them blue.</p>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy), color = &quot;blue&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-69-1.png" width="672" /> #### 3.3 Exercises</p>
<ol style="list-style-type: decimal">
<li>What’s gone wrong with this code? Why are the points not blue?</li>
</ol>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, color = &quot;blue&quot;))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-70-1.png" width="672" /> <strong>The points are not blue because the aesthetic was not set by name as an argument of the geom function (outside of the aes parenthesis).</strong></p>
<ol start="2" style="list-style-type: decimal">
<li>Which variables in mpg are categorical? Which variables are continuous? (Hint: type ?mpg to read the documentation for the dataset). How can you see this information when you run mpg?</li>
</ol>
<pre class="r"><code>?mpg
mpg</code></pre>
<pre><code>## [38;5;246m# A tibble: 234 × 11[39m
##    manufacturer model      displ  year   cyl trans drv     cty   hwy fl    class
##    [3m[38;5;246m&lt;chr&gt;[39m[23m        [3m[38;5;246m&lt;chr&gt;[39m[23m      [3m[38;5;246m&lt;dbl&gt;[39m[23m [3m[38;5;246m&lt;int&gt;[39m[23m [3m[38;5;246m&lt;int&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;int&gt;[39m[23m [3m[38;5;246m&lt;int&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m
## [38;5;250m 1[39m audi         a4           1.8  [4m1[24m999     4 auto… f        18    29 p     comp…
## [38;5;250m 2[39m audi         a4           1.8  [4m1[24m999     4 manu… f        21    29 p     comp…
## [38;5;250m 3[39m audi         a4           2    [4m2[24m008     4 manu… f        20    31 p     comp…
## [38;5;250m 4[39m audi         a4           2    [4m2[24m008     4 auto… f        21    30 p     comp…
## [38;5;250m 5[39m audi         a4           2.8  [4m1[24m999     6 auto… f        16    26 p     comp…
## [38;5;250m 6[39m audi         a4           2.8  [4m1[24m999     6 manu… f        18    26 p     comp…
## [38;5;250m 7[39m audi         a4           3.1  [4m2[24m008     6 auto… f        18    27 p     comp…
## [38;5;250m 8[39m audi         a4 quattro   1.8  [4m1[24m999     4 manu… 4        18    26 p     comp…
## [38;5;250m 9[39m audi         a4 quattro   1.8  [4m1[24m999     4 auto… 4        16    25 p     comp…
## [38;5;250m10[39m audi         a4 quattro   2    [4m2[24m008     4 manu… 4        20    28 p     comp…
## [38;5;246m# … with 224 more rows[39m</code></pre>
<p><strong>The variables manufacturer (manufacturer), model name (model), type of transmission (trans), type of drive train (drv), fuel type (fl), and “type” of car (class) are all categorical variables. The variables engine displacement, in litres (displ), year of manufacture (year), number of cylinders (cyl), city miles per gallon (cty), and highway miles per gallon (hwy) are all continuous variables. I can see this information when I run mpg because it gives me the first 10 rows of each column, so I can visually see which type of variable it is (by whether or not it is measured in numbers or not).</strong></p>
<ol start="3" style="list-style-type: decimal">
<li>Map a continuous variable to color, size, and shape. How do these aesthetics behave differently for categorical vs. continuous variables?</li>
</ol>
<pre class="r"><code># color
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, color = cyl))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-72-1.png" width="672" /> <strong>For color, the aesthetics also assign each number a particular color like it did for the categorical variable.</strong></p>
<pre class="r"><code># size
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, size = cyl))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-73-1.png" width="672" /> <strong>For size, the aesthetics also assign each number a size like it did for the categorical variable.</strong></p>
<pre class="r"><code># shape
#ggplot(data = mpg) + 
  #geom_point(mapping = aes(x = displ, y = hwy, shape = cyl))</code></pre>
<p><strong>Shape cannot be mapped for a continuous variable like it could for a catergorical variable.</strong></p>
<ol start="4" style="list-style-type: decimal">
<li>What happens if you map the same variable to multiple aesthetics?</li>
</ol>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, shape = class, color = class))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-75-1.png" width="672" /> <strong>If you map the same variable to multiple aesthetics, it applies both of them to the variable.</strong></p>
<ol start="5" style="list-style-type: decimal">
<li>What does the stroke aesthetic do? What shapes does it work with? (Hint: use ?geom_point)</li>
</ol>
<pre class="r"><code>?geom_point</code></pre>
<p><strong>The stroke aesthetic adjusts the thickness of the border for shapes that can take on different colors both inside and outside. It only works with shapes 21-24, which are a square, circle, triangle, and diamond with an inside and outside color.</strong></p>
<ol start="6" style="list-style-type: decimal">
<li>What happens if you map an aesthetic to something other than a variable name, like aes(colour = displ &lt; 5)? Note, you’ll also need to specify x and y.</li>
</ol>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, colour = displ &lt; 5))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-77-1.png" width="672" /> __If you map an aesthetic to something other than a variable name,it creates a new variable with the results of the operation. In this exmaple, the new variable takes on a value of TRUE if the engine displacement is less than 5 or FALSE if the engine displacement is more than or equal to 5, and plots this.</p>
</div>
<div id="common-problems" class="section level3">
<h3>3.4 Common problems</h3>
<p>This code creates an error because the + is in the wrong spot</p>
<pre class="r"><code>#ggplot(data = mpg) 
#+ geom_point(mapping = aes(x = displ, y = hwy))</code></pre>
</div>
<div id="facets" class="section level3">
<h3>3.5 Facets</h3>
<p>Use facet wrap to split the plot into subplots that each display one subset of the data. Here, we are creating subplots based on the type of car.</p>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy)) + 
  facet_wrap(~ class, nrow = 2)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-79-1.png" width="672" /></p>
<p>You can also facet the plot on the combination of two variables, using facet grid.</p>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy)) + 
  facet_grid(drv ~ cyl)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-80-1.png" width="672" /></p>
<div id="exercises-1" class="section level4">
<h4>3.5 Exercises</h4>
<ol style="list-style-type: decimal">
<li>What happens if you facet on a continuous variable?</li>
</ol>
<pre class="r"><code>ggplot(data = mpg) +
  geom_point(mapping = aes(x = drv, y = cyl)) +
  facet_wrap(~displ)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-81-1.png" width="672" /> <strong>If you facet on a continuous variable, it would not make sense because R would make a different graph for each unique variable.</strong></p>
<ol start="2" style="list-style-type: decimal">
<li>What do the empty cells in plot with facet_grid(drv ~ cyl) mean? How do they relate to this plot?</li>
</ol>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_point(mapping = aes(x = drv, y = cyl)) +
  facet_grid(drv ~ cyl)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-82-1.png" width="672" /> <strong>The empty cells means that there are no points for that section. For this example, there are no vehicles with 5 cylinders that are also 4 weel drives.</strong></p>
<ol start="3" style="list-style-type: decimal">
<li>What plots does the following code make? What does . do?</li>
</ol>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy)) +
  facet_grid(drv ~ .)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-83-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy)) +
  facet_grid(. ~ cyl)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-83-2.png" width="672" /> <strong>This code makes two plots of engine displacement, in litres (displ) and hwy (a car’s fuel efficiency on the highway, in miles per gallon). The . acts as a placeholder for a second variable, making the plot in one dimension instead.</strong></p>
<ol start="4" style="list-style-type: decimal">
<li>Take the first faceted plot in this section: What are the advantages to using faceting instead of the colour aesthetic? What are the disadvantages? How might the balance change if you had a larger dataset?</li>
</ol>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy)) + 
  facet_wrap(~ class, nrow = 2)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-84-1.png" width="672" /> <strong>The advantages of using faceting instead of a color aesthetic is that it lets us clearly see only the 2 seaters, rather than the 2 seaters on the same plot as the other types of cars like color would do. The disadvantages are that it makes it harder to compare all of the other types of cars together. If I had a larger dataset, the balance might change because there may too many points that the colors would overlap and not let us fully understand the plot.</strong></p>
<ol start="5" style="list-style-type: decimal">
<li>Read ?facet_wrap. What does nrow do? What does ncol do? What other options control the layout of the individual panels? Why doesn’t facet_grid() have nrow and ncol arguments?</li>
</ol>
<pre class="r"><code>?facet_wrap</code></pre>
<p><strong>Nrow sets the number of rows, while ncol sets the number of columns. Using the as.table function, if it is TRUE, the facets are laid out like a table with the highest values at the bottom-right; if it is FALSE, the facets are laid out like a plot with the highest value at the top-right. Facet_grid() does not have nrow and ncol arguemnts because the number of unique values of the variables are specified in the function that determines the number of rows and columns.</strong></p>
<ol start="6" style="list-style-type: decimal">
<li>When using facet_grid() you should usually put the variable with more unique levels in the columns. Why? <strong>You should put the variable with more unquie levels because it will make the graph expand vertically, which is easier to view than horizontally which would squish the values.</strong></li>
</ol>
</div>
</div>
<div id="geometric-objects" class="section level3">
<h3>3.6 Geometric Objects</h3>
<p>To make a scatterplot in ggplot, use the point geom.</p>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-86-1.png" width="672" /></p>
<p>To change the linetype in ggplot, use the smooth geom.</p>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_smooth(mapping = aes(x = displ, y = hwy))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-87-1.png" width="672" /></p>
<p>Using geom_smooth, you could change the linetype. In this example, R will make a different line type for each type of wheel drive.</p>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_smooth(mapping = aes(x = displ, y = hwy, linetype = drv))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-88-1.png" width="672" /></p>
<p>You can set the group aesthetic to a categorical variable to draw multiple objects</p>
<pre class="r"><code>ggplot(data = mpg) +
  geom_smooth(mapping = aes(x = displ, y = hwy))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-89-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = mpg) +
  geom_smooth(mapping = aes(x = displ, y = hwy, group = drv))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-89-2.png" width="672" /></p>
<pre class="r"><code>ggplot(data = mpg) +
  geom_smooth(
    mapping = aes(x = displ, y = hwy, color = drv),
    show.legend = FALSE
  )</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-89-3.png" width="672" /></p>
<p>You can also display multiple geoms in the same plot by adding multiple geom functions in ggplot</p>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy)) +
  geom_smooth(mapping = aes(x = displ, y = hwy))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-90-1.png" width="672" /></p>
<p>The code above, however, introduces some duplication in the code. This can be avoided by passing a set of mappings to ggplot, which will globalize the mappings.</p>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) + 
  geom_point() + 
  geom_smooth()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-91-1.png" width="672" /></p>
<p>This code makes it possible to display different aesthetics in different layers.</p>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) + 
  geom_point(mapping = aes(color = class)) + 
  geom_smooth()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-92-1.png" width="672" /></p>
<p>You can also do this to specify different data for each layer. Here, the local data argument overrides the global data argument.</p>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) + 
  geom_point(mapping = aes(color = class)) + 
  geom_smooth(data = filter(mpg, class == &quot;subcompact&quot;), se = FALSE)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-93-1.png" width="672" /></p>
<div id="exercises-2" class="section level4">
<h4>3.6 Exercises</h4>
<ol style="list-style-type: decimal">
<li><p>What geom would you use to draw a line chart? A boxplot? A histogram? An area chart? <strong>A line chart uses geom_line, a boxplot uses geom_boxplot, a histogram uses geom_histogram, and an area chart uses geom_area.</strong></p></li>
<li><p>Run this code in your head and predict what the output will look like. Then, run the code in R and check your predictions. <strong>I think that this will produce a plot with both the points and lines shown in different colors.</strong></p></li>
</ol>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) + 
  geom_point() + 
  geom_smooth(se = FALSE)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-94-1.png" width="672" /> 3. What does show.legend = FALSE do? What happens if you remove it? Why do you think I used it earlier in the chapter? <strong>Show.legend = FALSE removes the legend from the plot. If you remove it, the aesthestics are still mapped but the key is removed. I think this was used earlier in the chapter because three plots were plotted next together and it saved space and was less confusing to remove the key.</strong></p>
<ol start="4" style="list-style-type: decimal">
<li>What does the se argument to geom_smooth() do?</li>
</ol>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) + 
  geom_point() + 
  geom_smooth(se = TRUE)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-95-1.png" width="672" /> <strong>The se argument in geom_smooth, when set to true, plots the confidence intervals around the lines.</strong></p>
<ol start="5" style="list-style-type: decimal">
<li>Will these two graphs look different? Why/why not?</li>
</ol>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) + 
  geom_point() + 
  geom_smooth()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-96-1.png" width="672" /></p>
<pre class="r"><code>ggplot() + 
  geom_point(data = mpg, mapping = aes(x = displ, y = hwy)) + 
  geom_smooth(data = mpg, mapping = aes(x = displ, y = hwy))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-96-2.png" width="672" /> <strong>No, these two graphs will not look different. The first plot does not specifcy the two geom arguments so R applys it automatically to the plot, while the second specifies each individually.</strong></p>
<ol start="6" style="list-style-type: decimal">
<li>Recreate the R code necessary to generate the following graphs.</li>
</ol>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
  geom_point() +
  geom_smooth(se = FALSE)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-97-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
  geom_smooth(aes(group = drv), se = FALSE) +
  geom_point()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-98-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) +
  geom_point() +
  geom_smooth(se = FALSE)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-99-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
  geom_point(aes(color = drv)) +
  geom_smooth(se = FALSE)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-100-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
  geom_point(aes(color = drv)) +
  geom_smooth(aes(linetype = drv), se = FALSE)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-101-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
  geom_point(size = 4, colour = &quot;white&quot;) +
  geom_point(aes(colour = drv))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-102-1.png" width="672" /></p>
</div>
</div>
<div id="statistical-transformations" class="section level3">
<h3>3.7 Statistical transformations</h3>
<p>Lets create a bar chart of the diamonds dataset for the cut of the diamond.</p>
<pre class="r"><code>ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-103-1.png" width="672" /></p>
<p>Stat_count can also be used instead of geom_bar, as both will count the number of cuts in the data.</p>
<pre class="r"><code>ggplot(data = diamonds) + 
  stat_count(mapping = aes(x = cut))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-104-1.png" width="672" /></p>
<p>No we are going to override the default stat and change count to identity, which maps the height of the bars to the raw values of a y variable.</p>
<pre class="r"><code>demo &lt;- tribble(
  ~cut,         ~freq,
  &quot;Fair&quot;,       1610,
  &quot;Good&quot;,       4906,
  &quot;Very Good&quot;,  12082,
  &quot;Premium&quot;,    13791,
  &quot;Ideal&quot;,      21551
)

ggplot(data = demo) +
  geom_bar(mapping = aes(x = cut, y = freq), stat = &quot;identity&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-105-1.png" width="672" /></p>
<p>You can also override the default by displaying a bar chart or proportion rather than count.</p>
<pre class="r"><code>ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, y = stat(prop), group = 1))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-106-1.png" width="672" /></p>
<p>You can also use stat_summary to summarize the y values for each unique x value to draw attention to the statistical transformation in the code.</p>
<pre class="r"><code>ggplot(data = diamonds) + 
  stat_summary(
    mapping = aes(x = cut, y = depth),
    fun.min = min,
    fun.max = max,
    fun = median
  )</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-107-1.png" width="672" /></p>
<div id="exercises-3" class="section level4">
<h4>3.7 Exercises</h4>
<ol style="list-style-type: decimal">
<li>What is the default geom associated with stat_summary()? How could you rewrite the previous plot to use that geom function instead of the stat function? <strong>The default geom is geom_pointrange. It could be written as ggplot(data = diamonds) + geom_pointrange(mapping = aes(x = cut, y = depth),stat = “summary”,fun.ymin = min,fun.ymax = max,fun.y = median) to use the geom function instead of the stat function. This would look like the plot below.</strong></li>
</ol>
<pre class="r"><code>ggplot(data = diamonds) +
  geom_pointrange(
mapping = aes(x = cut, y = depth),
stat = &quot;summary&quot;,
fun.ymin = min,
fun.ymax = max,
fun.y = median
  )</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-108-1.png" width="672" /></p>
<ol start="2" style="list-style-type: decimal">
<li>What does geom_col() do? How is it different to geom_bar()?</li>
</ol>
<pre class="r"><code>?geom_col</code></pre>
<p><strong>Geom_bar uses the stat_count statistical transformation to make the bar plot, while geom_col assumes that the vaules have already been transformed to the correct values.</strong></p>
<ol start="3" style="list-style-type: decimal">
<li><p>Most geoms and stats come in pairs that are almost always used in concert. Read through the documentation and make a list of all the pairs. What do they have in common? <strong>geom: stat: geom_bar() stat_count() geom_bin2d() stat_bin_2d() geom_boxplot() stat_boxplot() geom_contour_filled() stat_contour_filled() geom_contour() stat_contour() geom_count() stat_sum() geom_density_2d() stat_density_2d() geom_density() stat_density() geom_dotplot() stat_bindot() geom_function() stat_function() geom_sf() stat_sf() geom_sf() stat_sf() geom_smooth() stat_smooth() geom_violin() stat_ydensity() geom_hex() stat_bin_hex() geom_qq_line() stat_qq_line() geom_qq() stat_qq() geom_quantile() stat_quantile()</strong> <strong>The pairs all have their names in common and the ones used in concert often have each other as the default.</strong></p></li>
<li><p>What variables does stat_smooth() compute? What parameters control its behavior?</p></li>
</ol>
<pre class="r"><code>?stat_smooth()</code></pre>
<p><strong>The variables that stat_smooth() computes is y (predicted value), ymin (lower pointwise confidence interval around the mean), ymax (upper pointwise confidence interval around the mean), and se (standard error). The method controls the smoothing method to be used, the se determines whether or not the confidence interval should be plotted, and the level determines the level of the confience interval to use.</strong></p>
<ol start="5" style="list-style-type: decimal">
<li>In our proportion bar chart, we need to set group = 1. Why? In other words what is the problem with these two graphs?</li>
</ol>
<pre class="r"><code>ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, y = after_stat(prop)))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-111-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, fill = color, y = after_stat(prop)))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-112-1.png" width="672" /> <strong>The problem with these graphs is that the proportions for each cut were calculated using the complete dataset, rather than each subset of the cut variable. This happened because we did not set group = 1.</strong></p>
</div>
</div>
<div id="position-adjustments" class="section level3">
<h3>3.8 Position adjustments</h3>
<p>You can color a bar chart by using the color or fill aesthetic.</p>
<pre class="r"><code>ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, colour = cut))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-113-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, fill = cut))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-113-2.png" width="672" /> If you fill in the map with another variable, like clarity, the bars are automatically stacked.</p>
<pre class="r"><code>ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, fill = clarity))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-114-1.png" width="672" /> Specifying the identity option within the position argument, it will place each object exactly where it falls in the context of the graph. This is really difficult to see with bars since it overlaps them, so the bars need to be either slightly transparent by setting alpha to a small value</p>
<pre class="r"><code>ggplot(data = diamonds, mapping = aes(x = cut, fill = clarity)) + 
  geom_bar(alpha = 1/5, position = &quot;identity&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-115-1.png" width="672" /> Or completly transparent by setting fill = NA.</p>
<pre class="r"><code>ggplot(data = diamonds, mapping = aes(x = cut, colour = clarity)) + 
  geom_bar(fill = NA, position = &quot;identity&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-116-1.png" width="672" /></p>
<p>Specifying the fill option within the position argument, it makes each set of stacked bars the same height (making it easier to compare proportions across groups).</p>
<pre class="r"><code>ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, fill = clarity), position = &quot;fill&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-117-1.png" width="672" /></p>
<p>Specifying the dodge option within the position argument,it places overlapping objects directly beside one another.</p>
<pre class="r"><code>ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, fill = clarity), position = &quot;dodge&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-118-1.png" width="672" /></p>
<p>One problem with making a scatterplot with large amounts of data is that overplotting may happen, which overlaps the points with each other. To fix this, you could set the position adjustment to jitter to add a small amount of random noise to each point, spreading them out.</p>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy), position = &quot;jitter&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-119-1.png" width="672" /></p>
<div id="exercises-4" class="section level4">
<h4>3.8 Exercises</h4>
<ol style="list-style-type: decimal">
<li>What is the problem with this plot? How could you improve it?</li>
</ol>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = cty, y = hwy)) + 
  geom_point()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-120-1.png" width="672" /> <strong>The problem with this plot is that many of the points overlap so not all of them are plotted. This could be improved by adding random jitter to the plot.</strong></p>
<ol start="2" style="list-style-type: decimal">
<li><p>What parameters to geom_jitter() control the amount of jittering? <strong>Width and height control the amount of jittering.</strong></p></li>
<li><p>Compare and contrast geom_jitter() with geom_count().</p></li>
</ol>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = cty, y = hwy)) +
  geom_jitter()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-121-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = cty, y = hwy)) +
  geom_count()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-122-1.png" width="672" /> <strong>Geom_count counts the number of observations at each point and then maps the count to the point area, making larger points more obvious, while geom_jitter creats random noise.</strong></p>
<ol start="4" style="list-style-type: decimal">
<li>What’s the default position adjustment for geom_boxplot()? Create a visualization of the mpg dataset that demonstrates it. <strong>The default position adjustment is position_dodge.</strong></li>
</ol>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = class, y = hwy, color = drv)) +
  geom_boxplot(position = &quot;dodge&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-123-1.png" width="672" /></p>
</div>
</div>
<div id="coordinate-systems" class="section level3">
<h3>3.9 Coordinate systems</h3>
<p>You can use the coord_flip function to switch the x and y axes. This is the plot before</p>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = class, y = hwy)) + 
  geom_boxplot()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-124-1.png" width="672" /></p>
<p>And after.</p>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = class, y = hwy)) + 
  geom_boxplot() +
  coord_flip()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-125-1.png" width="672" /></p>
<p>The function coord_quickmap sets the aspect ratio correctly for maps. This is the incorrect map</p>
<pre class="r"><code>nz &lt;- map_data(&quot;nz&quot;)

ggplot(nz, aes(long, lat, group = group)) +
  geom_polygon(fill = &quot;white&quot;, colour = &quot;black&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-126-1.png" width="672" /></p>
<p>This is the correct map using the coord_quickmap function.</p>
<pre class="r"><code>ggplot(nz, aes(long, lat, group = group)) +
  geom_polygon(fill = &quot;white&quot;, colour = &quot;black&quot;) +
  coord_quickmap()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-127-1.png" width="672" /></p>
<p>Similarly, coord_polar uses polar coordinates which revel a connection between a bar chart and a coxcomb chart. This is the plot with coord_flip.</p>
<pre class="r"><code>bar &lt;- ggplot(data = diamonds) + 
  geom_bar(
    mapping = aes(x = cut, fill = cut), 
    show.legend = FALSE,
    width = 1
  ) + 
  theme(aspect.ratio = 1) +
  labs(x = NULL, y = NULL)

bar + coord_flip()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-128-1.png" width="672" /></p>
<p>And this is the plot with coord_polar.</p>
<pre class="r"><code>bar + coord_polar()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-129-1.png" width="672" /></p>
<div id="exercises-5" class="section level4">
<h4>3.9 Exercises</h4>
<ol style="list-style-type: decimal">
<li>Turn a stacked bar chart into a pie chart using coord_polar().</li>
</ol>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = factor(1), fill = class)) +
  geom_bar(width = 1) +
  coord_polar(theta = &quot;y&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-130-1.png" width="672" /></p>
<ol start="2" style="list-style-type: decimal">
<li>What does labs() do? Read the documentation.</li>
</ol>
<pre class="r"><code>?labs()</code></pre>
<p><strong>Labs adds labels to a graph, such as a title, subtitle, and x and y axes labels.</strong></p>
<ol start="3" style="list-style-type: decimal">
<li>What’s the difference between coord_quickmap() and coord_map()?</li>
</ol>
<pre class="r"><code>?coord_quickmap()
?coord_map()</code></pre>
<p><strong>Coord_map projects the earth onto a flat plane without preserving straight lines. Coord_quickmap can do the projection with preserving straight lines and is faster to draw, but less accurate.</strong></p>
<ol start="4" style="list-style-type: decimal">
<li>What does the plot below tell you about the relationship between city and highway mpg? Why is coord_fixed() important? What does geom_abline() do?</li>
</ol>
<pre class="r"><code>ggplot(data = mpg, mapping = aes(x = cty, y = hwy)) +
  geom_point() + 
  geom_abline() +
  coord_fixed()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-133-1.png" width="672" /> <strong>The plot tell us that city miles per gallon increases, the car’s fuel efficiency on the highway, in miles per gallon, increase. The coord_fixed is important because it draws equal intervals on the x and y axes so they are directly comparable. The geom_abline adds the straight line to the plot.</strong></p>
</div>
</div>
<div id="the-layered-grammar-of-graphics" class="section level3">
<h3>3.10 The layered grammar of graphics</h3>
<p>Lets add everything we have learned so far to the template.</p>
<pre class="r"><code>#ggplot(data = &lt;DATA&gt;) + 
  #&lt;GEOM_FUNCTION&gt;(
   #  mapping = aes(&lt;MAPPINGS&gt;),
    # stat = &lt;STAT&gt;, 
    # position = &lt;POSITION&gt;
 # ) +
#  &lt;COORDINATE_FUNCTION&gt; +
#  &lt;FACET_FUNCTION&gt;</code></pre>
</div>
</div>
<div id="chapter-28-graphics-for-communication" class="section level2">
<h2>Chapter 28 Graphics for communication</h2>
<div id="label" class="section level3">
<h3>28.2 Label</h3>
<p>The best place to start in making an easy to read graph is using good labels. You can do this with the labs function.</p>
<pre class="r"><code>ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(color = class)) +
  geom_smooth(se = FALSE) +
  labs(title = &quot;Fuel efficiency generally decreases with engine size&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-135-1.png" width="672" /></p>
<p>If you need to add more information to the title of the graph, you can use a subtitle and caption as well.</p>
<pre class="r"><code>ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(color = class)) +
  geom_smooth(se = FALSE) +
  labs(
    title = &quot;Fuel efficiency generally decreases with engine size&quot;,
    subtitle = &quot;Two seaters (sports cars) are an exception because of their light weight&quot;,
    caption = &quot;Data from fueleconomy.gov&quot;
  )</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-136-1.png" width="672" /></p>
<p>You can also use the labs function to replace the axis and legend titles.</p>
<pre class="r"><code>ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(colour = class)) +
  geom_smooth(se = FALSE) +
  labs(
    x = &quot;Engine displacement (L)&quot;,
    y = &quot;Highway fuel economy (mpg)&quot;,
    colour = &quot;Car type&quot;
  )</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-137-1.png" width="672" /></p>
<p>If you want to use mathematical equations instead of labels, you can switch the "" out for quote().</p>
<pre class="r"><code>df &lt;- tibble(
  x = runif(10),
  y = runif(10)
)
ggplot(df, aes(x, y)) +
  geom_point() +
  labs(
    x = quote(sum(x[i] ^ 2, i == 1, n)),
    y = quote(alpha + beta + frac(delta, theta))
  )</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-138-1.png" width="672" /> #### 28.2 Exercises</p>
<ol style="list-style-type: decimal">
<li>Create one plot on the fuel economy data with customized title, subtitle, caption, x, y, and color labels.</li>
</ol>
<pre class="r"><code>ggplot(mpg, aes(displ, hwy)) +
  geom_point() +
  geom_smooth(method = &quot;lm&quot;, se = FALSE) +
  labs(
    title = &quot;Fuel Efficiency Decreases with Engine Size&quot;,
    caption = &quot;Data from fueleconomy.gov&quot;,
    y = &quot;Highway Miles per Gallon&quot;,
    x = &quot;Engine Displacement&quot;
  )</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-139-1.png" width="672" /></p>
<ol start="2" style="list-style-type: decimal">
<li>The geom_smooth() is somewhat misleading because the hwy for large engines is skewed upwards due to the inclusion of lightweight sports cars with big engines. Use your modeling tools to fit and display a better model. <strong>A better way to display this datter is to control the span to a more linear trend, using the following code.</strong></li>
</ol>
<pre class="r"><code>ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(color = class)) +
  geom_smooth(se = FALSE, method = &quot;lm&quot;) +
  labs(
    x = &quot;Engine displacement (L)&quot;,
    y = &quot;Highway fuel economy (mpg)&quot;,
    color = &quot;Car type&quot;,
    title = paste(
      &quot;Fuel efficiency generally decreases with&quot;,
      &quot;engine size&quot;
    ),
    subtitle = paste(
      &quot;Two seaters (sports cars) are an exception&quot;,
      &quot;because of their light weight&quot;
    ),
    caption = &quot;Data from fueleconomy.gov&quot;
    )</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-140-1.png" width="672" /></p>
<ol start="3" style="list-style-type: decimal">
<li>Take an exploratory graphic that you’ve created in the last month, and add informative titles to make it easier for others to understand.</li>
</ol>
<pre class="r"><code>#looking at the fatal police shooting data from exam 1
dat &lt;- read.csv(file = &quot;/Users/briannafisher/Dropbox/CRIM250/CRIM 250 Github/BriannaFisher/data/fatal-police-shootings-datacopy.csv&quot;)

ggplot(dat, aes(fill=body_camera, y=frequency(body_camera), x=flee)) + 
  geom_bar(position=&quot;stack&quot;, stat=&quot;identity&quot;) +
  ggtitle(&quot;Stacked Barplot of Body Camera Usage and Victim Fleeing&quot;) +
  labs(y=&quot;Frequency of Body Camera Usage&quot;, x = &quot;How the Victim Fled&quot;, subtitle = &quot;The dataset is made up of every fatal police shooting in the US since January 1, 2015&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-141-1.png" width="672" /></p>
<pre class="r"><code>  labs(fill = &quot;Body Camera Usage&quot;)</code></pre>
<pre><code>## $fill
## [1] &quot;Body Camera Usage&quot;
## 
## attr(,&quot;class&quot;)
## [1] &quot;labels&quot;</code></pre>
</div>
<div id="annotations" class="section level3">
<h3>28.3 Annotations</h3>
<p>You could use the geom_text function to add textual labels to the plot. The following code pulls out the most efficient car in each class with dplyr, and then labels it on the plot.</p>
<pre class="r"><code>best_in_class &lt;- mpg %&gt;%
  group_by(class) %&gt;%
  filter(row_number(desc(hwy)) == 1)

ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(colour = class)) +
  geom_text(aes(label = model), data = best_in_class)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-142-1.png" width="672" /></p>
<p>This is really difficult to read, so we can make it easier with the geom_label function to draw a rectangle behind the box and the nudge_y parameter to move the labels slightly above the corresponding points.</p>
<pre class="r"><code>ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(colour = class)) +
  geom_label(aes(label = model), data = best_in_class, nudge_y = 2, alpha = 0.5)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-143-1.png" width="672" /></p>
<p>We can use the ggrepel package to automatically adjust the labels so that they do not overlap.</p>
<pre class="r"><code>#install.packages(&quot;ggrepel&quot;)
#library(ggrepel)
ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(colour = class)) +
  geom_point(size = 3, shape = 1, data = best_in_class) +
  ggrepel::geom_label_repel(aes(label = model), data = best_in_class)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-144-1.png" width="672" /></p>
<p>You can also replace the legend with labels places directly on the plot.</p>
<pre class="r"><code>class_avg &lt;- mpg %&gt;%
  group_by(class) %&gt;%
  summarise(
    displ = median(displ),
    hwy = median(hwy)
  )
#&gt; `summarise()` ungrouping output (override with `.groups` argument)

ggplot(mpg, aes(displ, hwy, colour = class)) +
  ggrepel::geom_label_repel(aes(label = class),
    data = class_avg,
    size = 6,
    label.size = 0,
    segment.color = NA
  ) +
  geom_point() +
  theme(legend.position = &quot;none&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-145-1.png" width="672" /></p>
<p>You can add a single label to the plot instead, and need to create a new data frame using summarize to compute the maximum values of x and y.</p>
<pre class="r"><code>label &lt;- mpg %&gt;%
  summarise(
    displ = max(displ),
    hwy = max(hwy),
    label = &quot;Increasing engine size is \nrelated to decreasing fuel economy.&quot;
  )

ggplot(mpg, aes(displ, hwy)) +
  geom_point() +
  geom_text(aes(label = label), data = label, vjust = &quot;top&quot;, hjust = &quot;right&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-146-1.png" width="672" /></p>
<p>You can also include +inf and -inf to place the text exactly on the borders of the plot, and tibble to create the data frame since we are no longer computing the positions from mpg.</p>
<pre class="r"><code>label &lt;- tibble(
  displ = Inf,
  hwy = Inf,
  label = &quot;Increasing engine size is \nrelated to decreasing fuel economy.&quot;
)

ggplot(mpg, aes(displ, hwy)) +
  geom_point() +
  geom_text(aes(label = label), data = label, vjust = &quot;top&quot;, hjust = &quot;right&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-147-1.png" width="672" /></p>
<p>Another way to do this is to add stringr::str_wrap() to automatically add line breaks</p>
<pre class="r"><code>&quot;Increasing engine size is related to decreasing fuel economy.&quot; %&gt;%
  stringr::str_wrap(width = 40) %&gt;%
  writeLines()</code></pre>
<pre><code>## Increasing engine size is related to
## decreasing fuel economy.</code></pre>
<pre class="r"><code>#&gt; Increasing engine size is related to
#&gt; decreasing fuel economy.</code></pre>
<div id="exercises-6" class="section level4">
<h4>28.3 Exercises</h4>
<ol style="list-style-type: decimal">
<li>Use geom_text() with infinite positions to place text at the four corners of the plot.</li>
</ol>
<pre class="r"><code>label_text &lt;- tibble(
  displ = c(-Inf, -Inf, Inf, Inf),
  hwy = c(Inf, -Inf, Inf, -Inf),
  hjust = c(&quot;left&quot;, &quot;left&quot;, &quot;right&quot;, &quot;right&quot;),
  vjust = c(&quot;top&quot;, &quot;bottom&quot;, &quot;top&quot;, &quot;bottom&quot;),
  text = c(&quot;This is top left&quot;,
           &quot;This is bottom left&quot;,
           &quot;This is top right&quot;,
           &quot;This is bottom right&quot;)
)
ggplot(mpg, aes(displ, hwy)) +
  geom_point() +
  geom_text(aes(hjust = hjust, vjust = vjust, label = text), data = label_text)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-149-1.png" width="672" /></p>
<ol start="2" style="list-style-type: decimal">
<li>Read the documentation for annotate(). How can you use it to add a text label to a plot without having to create a tibble?</li>
</ol>
<pre class="r"><code>?annotate()</code></pre>
<p><strong>You can use the annotate function to add a text label to a plot without having to create a tibble by using aesthetic mappings directly as arguments.</strong></p>
<ol start="3" style="list-style-type: decimal">
<li><p>How do labels with geom_text() interact with faceting? How can you add a label to a single facet? How can you put a different label in each facet? (Hint: think about the underlying data.) <strong>If the facet variable is not specified, the text is drawn in all facets. To add a label to a single facet, you can add a column to the label data frame with the value of the faceting variable(s) in which to draw it. To put a different label in each facet, you can just put in the variable that you want the labels to come from.</strong></p></li>
<li><p>What arguments to geom_label() control the appearance of the background box? <strong>The label.padding argument puts a padding around the label, the label.r argument determines the amount of rounding in the corners, and the label.size argument changes the size of the label border.</strong></p></li>
<li><p>What are the four arguments to arrow()? How do they work? Create a series of plots that demonstrate the most important options. The four arguments are angle (angle of arrow head), length (length of the arrow head), ends (ends of the line to draw arrow head), and type (open or close: whether the arrow head is a closed or open triangle).</p></li>
</ol>
<pre class="r"><code>#specifying the arrow length
mpg %&gt;% 
  ggplot(aes(displ, hwy)) +
  geom_point() +
  geom_segment(x = 3, xend = 4, y = 30, yend = 40,
               arrow = arrow())</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-151-1.png" width="672" /></p>
<pre class="r"><code>#specifying a closed type
mpg %&gt;% 
  ggplot(aes(displ, hwy)) +
  geom_point() +
  geom_segment(x = 3, xend = 4, y = 30, yend = 40,
               arrow = arrow(type = &quot;closed&quot;))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-152-1.png" width="672" /></p>
<pre class="r"><code>#specifying the angle 
mpg %&gt;% 
  ggplot(aes(displ, hwy)) +
  geom_point() +
  geom_segment(x = 3, xend = 4, y = 30, yend = 40,
               arrow = arrow(angle = 160))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-153-1.png" width="672" /></p>
<pre class="r"><code>#specifying the ends
mpg %&gt;% 
  ggplot(aes(displ, hwy)) +
  geom_point() +
  geom_segment(x = 3, xend = 4, y = 30, yend = 40,
               arrow = arrow(ends = &quot;first&quot;))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-154-1.png" width="672" /></p>
</div>
</div>
<div id="scales" class="section level3">
<h3>28.4 Scales</h3>
<p>ggplot will automatically add scales to the plot</p>
<pre class="r"><code>ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(colour = class))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-155-1.png" width="672" /></p>
<p>This is what R does behind the scenes</p>
<pre class="r"><code>ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(colour = class)) +
  scale_x_continuous() +
  scale_y_continuous() +
  scale_colour_discrete()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-156-1.png" width="672" /></p>
<p>Breaks controls the position of the ticks, or the values associated with the keys.</p>
<pre class="r"><code>ggplot(mpg, aes(displ, hwy)) +
  geom_point() +
  scale_y_continuous(breaks = seq(15, 40, by = 5))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-157-1.png" width="672" /></p>
<p>You can set the labels to null to suppress the labels altogether.</p>
<pre class="r"><code>ggplot(mpg, aes(displ, hwy)) +
  geom_point() +
  scale_x_continuous(labels = NULL) +
  scale_y_continuous(labels = NULL)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-158-1.png" width="672" /></p>
<p>You can also use breaks for when there are relatively few data points and you want to highlight exactly where the observations occur. We can highlight this with data on when each US president syatyed and ended their term.</p>
<pre class="r"><code>presidential %&gt;%
  mutate(id = 33 + row_number()) %&gt;%
  ggplot(aes(start, id)) +
    geom_point() +
    geom_segment(aes(xend = end, yend = id)) +
    scale_x_date(NULL, breaks = presidential$start, date_labels = &quot;&#39;%y&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-159-1.png" width="672" /></p>
<p>You can use the theme setting to control wherere the legen is drawn.</p>
<pre class="r"><code>base &lt;- ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(colour = class))

base + theme(legend.position = &quot;left&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-160-1.png" width="672" /></p>
<pre class="r"><code>base + theme(legend.position = &quot;top&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-160-2.png" width="672" /></p>
<pre class="r"><code>base + theme(legend.position = &quot;bottom&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-160-3.png" width="672" /></p>
<pre class="r"><code>base + theme(legend.position = &quot;right&quot;) # the default</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-160-4.png" width="672" /></p>
<p>You can also uses guides to control the display of individual legends. This code shows how to use nrow to control the number of rows the legend uses and how to override one of the aesthetics to make the points bigger (which is useful if there is a low alpha).</p>
<pre class="r"><code>ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(colour = class)) +
  geom_smooth(se = FALSE) +
  theme(legend.position = &quot;bottom&quot;) +
  guides(colour = guide_legend(nrow = 1, override.aes = list(size = 4)))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-161-1.png" width="672" /></p>
<pre class="r"><code>#&gt; `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p>You can also replace the scale by transforming the data. In the code below, this looks at carat and price with no transformation.</p>
<pre class="r"><code>ggplot(diamonds, aes(carat, price)) +
  geom_bin2d()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-162-1.png" width="672" /></p>
<p>Now, this code has the log of carat and price.</p>
<pre class="r"><code>ggplot(diamonds, aes(log10(carat), log10(price))) +
  geom_bin2d()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-163-1.png" width="672" /></p>
<p>You can also do this transformation with the scale so that the aes are labelled on the original data scale.</p>
<pre class="r"><code>ggplot(diamonds, aes(carat, price)) +
  geom_bin2d() + 
  scale_x_log10() + 
  scale_y_log10()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-164-1.png" width="672" /></p>
<p>You can also customize color, with the second plot being the shades of red and green that can be distinguished by people with red-green color blindness.</p>
<pre class="r"><code>ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(color = drv))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-165-1.png" width="672" /></p>
<pre class="r"><code>ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(color = drv)) +
  scale_colour_brewer(palette = &quot;Set1&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-165-2.png" width="672" /></p>
<p>If there are only a few colors, you can also add shapes to the plot.</p>
<pre class="r"><code>ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(color = drv, shape = drv)) +
  scale_colour_brewer(palette = &quot;Set1&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-166-1.png" width="672" /></p>
<p>Looking at the example from before with US presidents, you can change the color to see what party the president was.</p>
<pre class="r"><code>presidential %&gt;%
  mutate(id = 33 + row_number()) %&gt;%
  ggplot(aes(start, id, colour = party)) +
    geom_point() +
    geom_segment(aes(xend = end, yend = id)) +
    scale_colour_manual(values = c(Republican = &quot;red&quot;, Democratic = &quot;blue&quot;))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-167-1.png" width="672" /></p>
<p>If you want a continuous color, you can use a built in scale color gradient.</p>
<pre class="r"><code>#install.packages(&quot;hexbin&quot;)
#library(hexbin)

df &lt;- tibble(
  x = rnorm(10000),
  y = rnorm(10000)
)
ggplot(df, aes(x, y)) +
  geom_hex() +
  coord_fixed()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-168-1.png" width="672" /></p>
<pre class="r"><code>ggplot(df, aes(x, y)) +
  geom_hex() +
  viridis::scale_fill_viridis() +
  coord_fixed()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-168-2.png" width="672" /></p>
<div id="exercises-7" class="section level4">
<h4>28.4 Exercises</h4>
<ol style="list-style-type: decimal">
<li>Why doesn’t the following code override the default scale?</li>
</ol>
<pre class="r"><code>ggplot(df, aes(x, y)) +
  geom_hex() +
  scale_colour_gradient(low = &quot;white&quot;, high = &quot;red&quot;) +
  coord_fixed()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-169-1.png" width="672" /> <strong>The following code does not override the default scale because the colors in geom_hex are set by fill, not color. The correct code would be the following.</strong></p>
<pre class="r"><code>ggplot(df, aes(x, y)) +
  geom_hex() +
  scale_fill_gradient(low = &quot;white&quot;, high = &quot;red&quot;) +
  coord_fixed()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-170-1.png" width="672" /></p>
<ol start="2" style="list-style-type: decimal">
<li><p>What is the first argument to every scale? How does it compare to labs()? <strong>The first argument to every scale is the label for what the scale is being applied to (such as the x-axis). This is the equivalent of the labs() argument.</strong></p></li>
<li><p>Change the display of the presidential terms by:</p>
<ol style="list-style-type: decimal">
<li>Combining the two variants shown above.</li>
<li>Improving the display of the y axis.</li>
<li>Labeling each term with the name of the president.</li>
<li>Adding informative plot labels.</li>
<li>Placing breaks every 4 years (this is trickier than it seems!).</li>
</ol></li>
</ol>
<pre class="r"><code>presidential %&gt;%
  mutate(id = 33L + row_number()) %&gt;%
  ggplot(aes(start, id, colour = party)) +
  geom_point() +
  geom_segment(aes(xend = end, yend = id)) +
  geom_text(aes(label = name), vjust = &quot;bottom&quot;, nudge_y = 0.2)+
  scale_colour_manual(values = c(Republican = &quot;red&quot;, Democratic = &quot;blue&quot;))+
  scale_x_date(&quot;Year in 20th and 21st century&quot;, date_breaks = &quot;4 years&quot;, date_labels = &quot;&#39;%y&quot;)+
  # scale_x_date(NULL, breaks = presidential$start, date_labels = &quot;&#39;%y&quot;)+
  scale_y_continuous(breaks = c(36, 39, 42), labels = c(&quot;36th&quot;, &quot;39th&quot;, &quot;42nd&quot;))+
  labs(y = &quot;President number&quot;, x = &quot;Year&quot;)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-171-1.png" width="672" /></p>
<ol start="4" style="list-style-type: decimal">
<li>Use override.aes to make the legend on the following plot easier to see.</li>
</ol>
<pre class="r"><code>ggplot(diamonds, aes(carat, price)) +
  geom_point(aes(colour = cut), alpha = 1/20)</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-172-1.png" width="672" /></p>
<p>This should be the correct code below.</p>
<pre class="r"><code>ggplot(diamonds, aes(carat, price)) +
  geom_point(aes(colour = cut), alpha = 1 / 20) +
  guides(color = guide_legend(nrow = 1, override.aes = list(alpha = 1)))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-173-1.png" width="672" /> ### 28.5 Zooming</p>
<p>There are three ways to control the plot limits: adjusting what data are plotted, setting the limits in each scale, and setting xlim and ylim in coord_cartesian.</p>
<p>Here is a plot adjusting where the data are plotted</p>
<pre class="r"><code>mpg %&gt;%
  filter(displ &gt;= 5, displ &lt;= 7, hwy &gt;= 10, hwy &lt;= 30) %&gt;%
  ggplot(aes(displ, hwy)) +
  geom_point(aes(color = class)) +
  geom_smooth()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-174-1.png" width="672" /></p>
<p>And here is a plot with the coord_cartesian function</p>
<pre class="r"><code>ggplot(mpg, mapping = aes(displ, hwy)) +
  geom_point(aes(color = class)) +
  geom_smooth() +
  coord_cartesian(xlim = c(5, 7), ylim = c(10, 30))</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-175-1.png" width="672" /></p>
<p>You can also set limits on individual scales, which is helpful to compare different datasets or variables. Here is what what happen if you did not change the individual scales.</p>
<p>Plot 1:</p>
<pre class="r"><code>suv &lt;- mpg %&gt;% filter(class == &quot;suv&quot;)
compact &lt;- mpg %&gt;% filter(class == &quot;compact&quot;)

ggplot(suv, aes(displ, hwy, colour = drv)) +
  geom_point()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-176-1.png" width="672" /></p>
<p>Plot 2:</p>
<pre class="r"><code>ggplot(compact, aes(displ, hwy, colour = drv)) +
  geom_point()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-177-1.png" width="672" /> Here are the plots with scale limits.</p>
<p>Plot 1:</p>
<pre class="r"><code>x_scale &lt;- scale_x_continuous(limits = range(mpg$displ))
y_scale &lt;- scale_y_continuous(limits = range(mpg$hwy))
col_scale &lt;- scale_colour_discrete(limits = unique(mpg$drv))

ggplot(suv, aes(displ, hwy, colour = drv)) +
  geom_point() +
  x_scale +
  y_scale +
  col_scale</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-178-1.png" width="672" /></p>
<p>Plot 2:</p>
<pre class="r"><code>ggplot(compact, aes(displ, hwy, colour = drv)) +
  geom_point() +
  x_scale +
  y_scale +
  col_scale</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-179-1.png" width="672" /></p>
</div>
</div>
<div id="themes" class="section level3">
<h3>28.6 Themes</h3>
<p>You can also change the themes of your plots to make them different colors.</p>
<p>Here is a plot with a white background with black gridlines.</p>
<pre class="r"><code>ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(color = class)) +
  geom_smooth(se = FALSE) +
  theme_bw()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-180-1.png" width="672" /></p>
</div>
<div id="saving-your-plots" class="section level3">
<h3>28.7 Saving your plots</h3>
<p>In order to slave your plot, you can use the ggsave() function.</p>
<pre class="r"><code>ggplot(mpg, aes(displ, hwy)) + geom_point()</code></pre>
<p><img src="Assignments_files/figure-html/unnamed-chunk-181-1.png" width="672" /></p>
<p>This will save it to my most recent folder.</p>
<pre class="r"><code>ggsave(&quot;my-plot.pdf&quot;)</code></pre>
<p>There are different ways to change the figure size (fig.width, fig.height, fig.arp, out.width, and out.height), but these are the most helpful: 1. setting fig.width = 6 and fig.asp = 0.618 (the golden ratio in the default) 2. setting out.width = 70% and fig.align = center 3. when plotting multiple points in a a single row, set fig.align to default and - for two plots, setting out.width = 50% - for three plots, setting out.width = 33% - for four plots, setting out.width = 25%</p>
</div>
</div>
</div>
<div id="final-project" class="section level1">
<h1>Final Project</h1>
<div id="marijuana-possession-charges" class="section level2">
<h2>Marijuana Possession Charges</h2>
<div id="an-exploratory-look-at-the-relationship-between-race-and-sentencing-outcomes" class="section level3">
<h3>An exploratory look at the relationship between race and sentencing outcomes</h3>
</div>
<div id="by-brianna-fisher-sophie-faircloth-anna-sophia-lotman-hannah-wassermann" class="section level3">
<h3>By Brianna Fisher, Sophie Faircloth, Anna Sophia Lotman, Hannah Wassermann</h3>
<div id="introduction" class="section level4">
<h4>INTRODUCTION</h4>
<p>Following Nixon’s call for the War on Drugs in June 1971, there was a push for mandatory sentencing in drug-related crimes, effectively expanding the role of the federal government in drug-related arrests and sentencing (Drug Policy Alliance, 2021). Recently, there has been an uptick of discussion in the political world and in pop culture of the United States on the War on Drugs, namely regarding the adjustment of the severity of sentencing and its disproportionate effect on minority communities. These racial disparities are particularly discussed in regards to marijuana-related charges, as Black Americans have been found to be four times more likely to be arrested for marijuana charges than White Americans and six times more likely to be incarcerated for drug-related charges (Rahamatulla, 2017). Many agree that a solution to the disproportionate effects of drug-related charges needs to be created, and through the work discussed in this paper, we hope to focus our attention on sentencing outcomes and race for marijuana charges to further understand where disparities lie. Due to the increasing prevalence and history of drug-related sentencing, we wanted to examine the relationships in drug-related sentencing between race and sentencing likelihood, especially focusing on marijuana. We expect, from past studies examined in and outside of this course, that the rate of prison sentencing for Black people would be higher than the rate of prison sentencing of white people. These motivations lead to the research question: Are Black people sentenced federally to prison for marijuana at a higher rate than white people?</p>
</div>
<div id="description-of-the-data-used" class="section level4">
<h4>DESCRIPTION OF THE DATA USED</h4>
<p>The data set we utilized for this review is a record of federal criminal sentences as provided by the US Sentencing Committee (United States Sentencing Commission, 2007). This data set includes information on federal cases sentenced under the guidelines of the Sentencing Reform Act of 1984. Because of the research question prompting this paper, we chose to look at only cases where the defendant was charged with possession of marijuana. We used the “Drug Type 1” variable in the dataset to create a subset with these cases, as this variable indicated that marijuana was the highest penalty incurring drug the defendant was found with. Because we wanted to look at the relationship between race and being sentenced to prison, our independent variable was the defendant’s race (either Black or white cases) and our dependent variable was the type of sentence (either prison or no prison). We extrapolated specifically Black and white instantiations in the race variable so as to control for the number of independent variables being observed. We also decided to control for the defendant’s age, the defendant’s gender, and whether or not the defendant has a criminal record. We thought that these three variables would be the most influential in determining sentence type, both as legal (criminal record) and extralegal (age and gender) variables.</p>
</div>
<div id="exploratory-data-analysis" class="section level4">
<h4>EXPLORATORY DATA ANALYSIS</h4>
<p><img src="Assignments_files/figure-html/unnamed-chunk-186-1.png" width="672" /> To most successfully represent the variables being examined in this paper, we chose to create a bar plot representing the proportion of people sentenced and not sentenced to prison for both races included in the dataset.</p>
</div>
<div id="representative-model-and-diagnostic-information" class="section level4">
<h4>REPRESENTATIVE MODEL AND DIAGNOSTIC INFORMATION</h4>
<p>For the sake of our data set, we used a logistic regression. A logistic regression model is very similar to a linear regression; however, it is used to evaluate relationships between binary variables. Because our variables - race and sentencing outcome - both have only two options for the purpose of our study, we can examine this relationship between the binaries. Rather than a standard line, the graph of fit is a logit. The application of this model is to categorical variables, and the dependent variable matches the variable type of the independent.</p>
</div>
<div id="logistic-regression-assumptions" class="section level4">
<h4>LOGISTIC REGRESSION ASSUMPTIONS</h4>
<p><img src="Assignments_files/figure-html/unnamed-chunk-188-1.png" width="672" /></p>
<p>For the sake of our data set, we used a logistic regression. A logistic regression model is very similar to a linear regression; however, it is used to evaluate relationships between binary variables. Because our variables - race and sentencing outcome - both have only two options for the purpose of our study, we can examine this relationship between the binaries. Rather than a standard line, the graph of fit is a logit. The application of this model is to categorical variables, and the dependent variable matches the variable type of the independent.</p>
<p>The Residual vs. Fitted Plots in this figure look to see if there are any curvilinear trends in the plots that were originally missed. Because logistic regression is already curvilinear - as demonstrated by the logit that was previously displayed - these plots do not tell us any definitive information on the validity of this regression.</p>
<p>The QQ plot in the figure determines if the residuals are normally distributed. This plot is not indicative of anything definitive either because residuals do not have to be normally distributed in a logistic regression.</p>
<p>The Residuals vs. Leverage plots help identify outliers, but this plot too is not particularly useful because the results are not definitive either. From the models demonstrated in the assumptions, we do not gain information that definitively determines the strength of the logistic regression model for our data set, but the assumption display is crucial to data analysis so as to examine any particularly significant data that strays from the norm.</p>
</div>
<div id="regression-model" class="section level4">
<h4>Regression Model</h4>
<pre><code>## 
## Logistic Regression Outputs
## ================================================
##                         Dependent variable:     
##                     ----------------------------
##                                prison           
##                        Baseline      Controls   
##                          (1)            (2)     
## ------------------------------------------------
## Black                 -0.684***      -0.845***  
##                        (0.132)        (0.140)   
##                                                 
## Ages 70-97                             0.260    
##                                       (1.036)   
##                                                 
## Ages 50-69                             0.100    
##                                       (0.207)   
##                                                 
## Ages 30-49                           0.441***   
##                                       (0.116)   
##                                                 
## Female                               -1.194***  
##                                       (0.120)   
##                                                 
## No Criminal History                    0.071    
##                                       (0.117)   
##                                                 
## Constant               2.829***      2.881***   
##                        (0.060)        (0.102)   
##                                                 
## ------------------------------------------------
## Observations            6,123          6,123    
## ================================================
## Note:                *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01</code></pre>
<p>Looking at the baseline regression, we can see that Black people in the dataset were less likely to be sentenced to prison at a significant rate. Similarly, looking at the controlled regression, we can see that Black people were more likely to not be sentenced when compared to white people in the dataset. We split the age variable into three groups (of 16-29, 30-49, 50-69, and 70-97), leaving the 16-29 group out of the regression as our control because we thought that this group would be most likely to be in possession of marijuana. To our surprise, all three age groups were more likely to be sentenced to prison for marijuana charges than people that were 16-29. This may be due to the fact that there could have been more people in these other groups, or there could have been a large number of minors in the 16-29 group that were not sentenced to prison. We split the gender variable into male or female, leaving out the male group since we thought that this group would be more likely to be sentenced to prison. Looking at the model, we can see that this is true, and females were significantly less likely to be sentenced to prison than males. Finally, we split the criminal history variable into yes or no groups, leaving out the yes group since we thought that this group would be more likely to be sentenced to prison. To our surprise, having no criminal history made the defendant more likely to be sentenced to prison, but by an insignificant amount.</p>
</div>
<div id="causal-analysis" class="section level4">
<h4>CAUSAL ANALYSIS</h4>
<p>Because we used the “Drug Type 1” variable, we assumed that the defendant was either only found with marijuana or the other drug(s) did not incur any penalty. This did not take into account whether or not the defendant was charged with something incurring a felony charge, such as possession of drug paraphernalia or intent to sell. In an ideal world, our data would have been clear about what the defendant was actually charged with on all fronts, rather than just what drugs they were in possession of at the time of their arrest. We also only looked at about 6,000 observations, since we dropped everyone who was not Black or white. However, there were more white people in the dataset and more white people in prison in the dataset, so the groups may not have been proportional.</p>
<div id="dag" class="section level5">
<h5>DAG:</h5>
<pre><code>BEING ARRESTED 
^           |
|           v
RACE -------&gt; BEING SENTENCED TO PRISON</code></pre>
<p>Additionally, the DAG portrays the situation where the defendant’s race determines whether or not they will be arrested, and therefore the arrest determines whether they will be sentenced. Not everyone who is caught with marijuana is arrested, and not everyone who is arrested for marijuana charges is convicted. Similarly, the biases of the police and prosecutors could be at play, influencing both the arrest and sentence outcome. Because of these confounders, we would not be able to conclude that there was a causal analysis.</p>
</div>
<div id="limitations-and-future-directions" class="section level5">
<h5>LIMITATIONS AND FUTURE DIRECTIONS</h5>
<p>While setting out to examine sentencing outcomes and their relationship to race for marijuana-related charges, we observed a series of confounds:</p>
<ol style="list-style-type: decimal">
<li>Sentencing charges are not equated to arrests. It is worth looking in the future into the relationship between arrests and race for marijuana-related charges.</li>
<li>Our analysis did not include sentencing duration. Sentencing severity is a large component of the discussion for racial disparities in sentencing, not just the binary of whether someone was sentenced or not.</li>
<li>Though we controlled for different factors such as past arrests because they are crucial in determining sentencing outcomes they should be analyzed further in conjunction with the information we observed for future studies.</li>
</ol>
<p>This dataset is also a really interesting example of how a failure through data analysis can lead to false projections and misleading statistics. This is also a useful showcase of how easily data can also be manipulated depending on the neglect of specific outliers or parameters for the research. As previously stated, this data set is very limited. We don’t feel it can answer our research question in an accurate way, but it still provides a good lesson on the sensitivity of datasets with outlying variables and unobserved confounders.</p>
<p>For future research, it could be extremely valuable to look at the current different sentencing rates across states with different laws regarding the legality and decriminalization of marijuana. All marijuana usage (whether medical or recreational) is a federal crime, so theoretically everyone in the dataset should have been arrested regardless of race. However, this is not the case, and it is important to look at how there are disparities between federal and state sentences. Additionally, state police and prosecutors have much more discretion in deciding who to arrest, and what crimes to charge. We also were only able to look at sentencing as a binary factor without the important information of arrests records in general or whether or not the defendant has been arrested for marijuana in the past. In the future, we want to do a more well-rounded in-depth data analysis including everyone who was arrested (regardless of their conviction status), as well as the state’s current laws regarding marijuana.</p>
</div>
</div>
<div id="references" class="section level4">
<h4>References</h4>
<p>Commission, U. S. S. (2014, June 25). Monitoring of federal criminal sentences, [united states], 2007. Monitoring of Federal Criminal Sentences, [United States], 2007. Retrieved December 12, 2021, from <a href="https://www.icpsr.umich.edu/web/NACJD/studies/22623" class="uri">https://www.icpsr.umich.edu/web/NACJD/studies/22623</a>. Cusick Director, J., Cusick, J., Director, Director, C. M. A., Montecinos, C., Director, A., Director, S. H. A., Hananel, S., Oduyeru Manager, L., Oduyeru, L., Manager, Gordon Director, P., Gordon, P., Director, J. P. D., Parshall, J., Director, D., Pearl, B., Perez, M., Chung, E., … Simpson, E. (2021, October 28). Ending the war on drugs: By the numbers. Center for American Progress. Retrieved December 12, 2021, from <a href="https://www.americanprogress.org/article/ending-war-drugs-numbers/" class="uri">https://www.americanprogress.org/article/ending-war-drugs-numbers/</a>. Rahamatulla, A. (2017, March 23). The War on Drugs has failed. what’s next? Ford Foundation. Retrieved December 12, 2021, from <a href="https://www.fordfoundation.org/just-matters/just-matters/posts/the-war-on-drugs-has-failed-what-s-next/" class="uri">https://www.fordfoundation.org/just-matters/just-matters/posts/the-war-on-drugs-has-failed-what-s-next/</a>. We Are The Drug Policy Alliance. (n.d.). A history of the Drug War. Drug Policy Alliance. Retrieved December 12, 2021, from <a href="https://drugpolicy.org/issues/brief-history-drug-war" class="uri">https://drugpolicy.org/issues/brief-history-drug-war</a>.</p>
</div>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
